(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["InvoiceEdit"],{"445c":function(e,i,a){"use strict";var t=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("header",{staticClass:"nav-bar"},[e.headerData.leftText?a("div",{staticClass:"nav-bar-left"},[a("div",{on:{click:function(i){return i.stopPropagation(),e.handelClick(e.headerData.leftUrl)}}},[a("i",{staticClass:"iconfont iconicon-back"}),a("div",{staticClass:"nav-bar-txt"},[e._v(e._s(e.headerData.leftText))])])]):e._e(),a("div",{staticClass:"nav-bar-title"},[e._v(e._s(e.headerData.title))]),a("div",{staticClass:"nav-bar-right"},[e.headerData.rightText?a("div",{staticClass:"nav-bar-txt",on:{click:function(i){return e.handelClick(e.headerData.rightUrl,e.headerData.rightCallBackClick)}}},[e._v(e._s(e.headerData.rightText))]):e._e(),e.headerData.showSearch?a("i",{staticClass:"iconfont iconsousuo",on:{click:function(i){return e.searchClick()}}}):e._e()])])},n=[],s={name:"HeaderBar",props:{headerData:{type:null,required:!0}},data:function(){return{}},created:function(){this.headerData&&(this.headerData.rightCallBackClick||(this.headerData.rightCallBackClick=!1))},methods:{searchClick:function(){this.$bus.$emit("showMeun",!0)},handelClick:function(e,i){if(console.log("targetUrl=====================",e),"back"!==e)if("needConfirm"!==e){if(e)this.$router.push(e);else if(i){var a="callback";this.headerData&&this.headerData.rightText&&(a=this.headerData.rightText),this.$emit("callbackClick",a)}}else this.$emit("on-exit");else this.$router.go(-1)}}},o=s,c=a("2877"),r=Object(c["a"])(o,t,n,!1,null,"416ac0a2",null);i["a"]=r.exports},"9bd6":function(e,i,a){"use strict";a.r(i);var t=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"addressadd"},[a("headerBar",{attrs:{"header-data":e.headerData}}),a("div",{staticClass:"container"},[a("div",{staticClass:"content"},[a("div",{staticClass:"common-main box"},["ZZSZYFP"===e.invoicetype?a("div",[e._m(0),a("div",{staticClass:"content common-main"},[a("van-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{required:"",name:"fptt","error-message":e.errors.first("fptt"),label:"发票抬头","label-width":"110px",placeholder:"请输入发票抬头"},model:{value:e.header,callback:function(i){e.header=i},expression:"header"}}),a("div",{staticClass:"spe-list"},[a("div",{staticClass:"spe-left"},[a("span",{staticClass:"tit"},[e._v("发票内容")]),a("span",{staticClass:"info"},[a("van-radio-group",{model:{value:e.invoicecontent,callback:function(i){e.invoicecontent=i},expression:"invoicecontent"}},[a("van-radio",{attrs:{name:"MX"}},[e._v("明细")]),a("van-radio",{attrs:{name:"DNPJ"}},[e._v("电脑配件")]),a("van-radio",{attrs:{name:"HC"}},[e._v("耗材")]),a("van-radio",{attrs:{name:"BGYP"}},[e._v("办公用品")])],1)],1)])]),a("van-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|sbmCheck",expression:"'required|sbmCheck'"}],attrs:{label:"纳税人识别码","label-width":"110px",name:"nsrsbm",required:"","error-message":e.errors.first("nsrsbm"),placeholder:"请输入纳税人识别码"},model:{value:e.company_code,callback:function(i){e.company_code=i},expression:"company_code"}}),a("van-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"注册地址","label-width":"110px",name:"zcdd",required:"","error-message":e.errors.first("zcdd"),placeholder:"请输入注册地址"},model:{value:e.company_address,callback:function(i){e.company_address=i},expression:"company_address"}}),a("van-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|phone",expression:"'required|phone'"}],attrs:{label:"注册电话","label-width":"110px",name:"zcdh",required:"","error-message":e.errors.first("zcdh"),placeholder:"请输入注册电话"},model:{value:e.company_phone,callback:function(i){e.company_phone=i},expression:"company_phone"}}),a("van-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"开户银行","label-width":"110px",name:"khyh",required:"","error-message":e.errors.first("khyh"),placeholder:"请输入开户银行"},model:{value:e.company_bank,callback:function(i){e.company_bank=i},expression:"company_bank"}}),a("van-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|yhzhCheck",expression:"'required|yhzhCheck'"}],attrs:{label:"银行账户","label-width":"110px",name:"yhzh",required:"","error-message":e.errors.first("yhzh"),placeholder:"请输入银行账户"},model:{value:e.company_bankname,callback:function(i){e.company_bankname=i},expression:"company_bankname"}}),a("van-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|address",expression:"'required|address'"}],attrs:{label:"所在地区",placeholder:"请选择所在地区",name:"address","label-width":"110px",required:"","is-link":"",readonly:"","error-message":e.errors.first("address")},on:{click:e.showPopup},model:{value:e.address,callback:function(i){e.address=i},expression:"address"}}),a("van-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"所在街道",rows:"2",name:"jtdz","error-message":e.errors.first("jtdz"),autosize:"",type:"textarea",required:"","label-width":"110px",maxlength:"50",placeholder:"请填写街道、楼道号等"},model:{value:e.invoiceaddress,callback:function(i){e.invoiceaddress=i},expression:"invoiceaddress"}})],1),a("div",{staticClass:"bt-group"},[a("van-button",{attrs:{type:"info",block:"",round:"",size:"small"},on:{click:function(i){return e.saveInvoice("ZZSZYFP")}}},[e._v("保存")])],1)]):e._e(),"PTFP"===e.invoicetype?a("div",[e._m(1),a("div",{staticClass:"content common-main"},[a("van-field",{attrs:{"error-message":e.message1,label:"发票抬头","label-width":"110px",required:"",placeholder:"请输入发票抬头"},on:{input:function(i){return e.check1()},blur:function(i){return e.check1()}},model:{value:e.header,callback:function(i){e.header=i},expression:"header"}}),a("div",{staticClass:"spe-list"},[a("div",{staticClass:"spe-left"},[a("span",{staticClass:"tit"},[e._v("发票内容")]),a("span",{staticClass:"info"},[a("van-radio-group",{model:{value:e.invoicecontent,callback:function(i){e.invoicecontent=i},expression:"invoicecontent"}},[a("van-radio",{attrs:{name:"MX"}},[e._v("明细")]),a("van-radio",{attrs:{name:"DNPJ"}},[e._v("电脑配件")]),a("van-radio",{attrs:{name:"HC"}},[e._v("耗材")]),a("van-radio",{attrs:{name:"BGYP"}},[e._v("办公用品")])],1)],1)])]),a("van-field",{attrs:{"error-message":e.message2,label:"纳税人识别码","label-width":"110px",required:"",placeholder:"请输入纳税人识别码"},on:{blur:function(i){return e.check2()},input:function(i){return e.check2()}},model:{value:e.company_code,callback:function(i){e.company_code=i},expression:"company_code"}})],1),a("div",{staticClass:"bt-group"},[a("van-button",{attrs:{type:"info",block:"",round:"",size:"small"},on:{click:function(i){return e.savePtInvoice("PTFP")}}},[e._v("保存")])],1)]):e._e()])])]),a("van-popup",{style:{height:"70%"},attrs:{position:"bottom"},model:{value:e.show,callback:function(i){e.show=i},expression:"show"}},[a("XyAddress",{on:{getCheckResult:e.getCheckResult}})],1)],1)},n=[function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"title"},[a("div",{staticClass:"title-left"},[a("h2",[e._v("增值税专用发票")])])])},function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"title"},[a("div",{staticClass:"title-left"},[a("h2",[e._v("普通发票")])])])}],s=(a("b0c0"),a("445c")),o=a("a001"),c=a("33de"),r={name:"InvoiceEdit",components:{headerBar:s["a"],XyAddress:o["a"]},data:function(){return{headerData:{title:"修改发票模板",leftUrl:"back",leftText:" "},message1:"",message2:"",addressShow:"",address:"",invoice:"",header:"",company_code:"",company_address:"",company_phone:"",company_bank:"",company_bankname:"",szjd:"",invoiceprovice:"",invoicecity:"",invoicecounty:"",invoicetown:"",invoiceaddress:"",checked:!0,show:!1,radio:"1",addressmodel:"",id:"",invoicecontent:"",jgbh:""}},created:function(){this.$route.params&&(this.invoice=this.$route.params.invoice,this.invoice&&("ZZSZYFP"===this.invoice.invoicetype&&(this.id=this.invoice.id,this.jgbh=this.invoice.jgbh,this.header=this.invoice.header,this.invoicetype=this.invoice.invoicetype,this.company_code=this.invoice.company_code,this.company_address=this.invoice.company_address,this.company_phone=this.invoice.company_phone,this.company_bank=this.invoice.company_bank,this.company_bankname=this.invoice.company_bankname,this.invoicecontent=this.invoice.invoicecontent,this.invoiceprovice=this.invoice.invoiceprovice,this.invoicecity=this.invoice.invoicecity,this.invoicecounty=this.invoice.invoicecounty,this.invoicetown=this.invoice.invoicetown,this.invoiceaddress=this.invoice.invoiceaddress,this.address=this.invoice.area),"PTFP"===this.invoice.invoicetype&&(this.id=this.invoice.id,this.invoicetype=this.invoice.invoicetype,this.header=this.invoice.header,this.company_code=this.invoice.company_code,this.invoicecontent=this.invoice.invoicecontent)))},methods:{getCheckResult:function(e,i,a,t,n){n||(this.show=!1),e&&(this.address=e.text,this.invoiceprovice=e.value),i&&(this.address=this.address+"/"+i.text,this.invoicecity=i.value),a&&(this.address=this.address+"/"+a.text,this.invoicecounty=a.value),t&&(this.address=this.address+"/"+t.text,this.invoicetown=t.value)},saveInvoice:function(e){var i=this;this.$validator.validate().then((function(a){a&&(c["Sb"].data={id:i.id,invoicetype:e,header:i.header,company_code:i.company_code,company_address:i.company_address,company_phone:i.company_phone,company_bank:i.company_bank,company_bankname:i.company_bankname,invoicecontent:i.invoicecontent,invoiceprovice:i.invoiceprovice,invoicecity:i.invoicecity,invoicecounty:i.invoicecounty,invoicetown:i.invoicetown,invoiceaddress:i.invoiceaddress,jgbh:i.jgbh},i.asyncApiModule(c["Sb"]).then((function(e){i.$toast("保存发票信息成功"),i.$router.back()})).catch((function(){i.loading=!1})))}))},check1:function(){return this.header?(this.message1="",!0):(this.message1="请输入发票抬头",!1)},check2:function(){return this.company_code?/[0-9A-HJ-NPQRTUWXY]{2}\d{6}[0-9A-HJ-NPQRTUWXY]{10}/.test(this.company_code)?(this.message2="",!0):(this.message2="请输入正确的纳税人识别码",!1):(this.message2="请输入纳税人识别码",!1)},savePtInvoice:function(e){var i=this;this.check1()&this.check2()&&(c["Sb"].data={id:this.id,invoicetype:e,header:this.header,company_code:this.company_code,invoicecontent:this.invoicecontent,jgbh:this.jgbh},this.asyncApiModule(c["Sb"]).then((function(e){i.$toast("保存发票信息成功"),i.$router.back()})).catch((function(){i.loading=!1})))},goBack:function(){this.$router.back()},showPopup:function(){this.show=!0},onChange:function(e,i,a){var t=e.getValues();console.log(t);for(var n="",s=0;s<t.length;s++)n=n+(0===s?"":"/")+t[s].name;this.addressmodel=n},onConfirm:function(e){console.log("val-----",e),this.invoiceprovice=e[0].name,this.invoicecity=e[1].name,this.invoicecounty=e[2].name,this.address=e[0].name+"/"+e[1].name+"/"+e[2].name,this.addressShow=e[2].code,this.show=!1},onCancel:function(){this.show=!1,this.$refs.myArea.reset()}}},d=r,l=a("2877"),h=Object(l["a"])(d,t,n,!1,null,"16c95278",null);i["default"]=h.exports}}]);
//# sourceMappingURL=InvoiceEdit.27626894.js.map