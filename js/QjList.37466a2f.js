(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["QjList"],{1100:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"error-main"},[0!=t.pageStyle?i("div",{staticClass:"status"},[i("div",{class:t.getCss()}),i("h3",[t._v(t._s(t.getTitle()))]),i("van-button",{directives:[{name:"show",rawName:"v-show",value:t.showButton,expression:"showButton"}],attrs:{type:"info"},on:{click:t.errorButton}},[t._v(t._s(t.getButton()))])],1):t._e()])},n=[],a={name:"Error",props:{pageStyle:{type:null,required:!0},showButton:{default:!0,type:Boolean}},data:function(){return{}},watch:{pageTitle:function(t){}},created:function(){},methods:{errorButton:function(){-1==this.pageStyle?this.$router.push("/login"):this.$emit("errorButton")},getTitle:function(){return-1==this.pageStyle?"未登录，请先登录":0==this.pageStyle?"正常状态不显示":1==this.pageStyle?"暂无数据":2==this.pageStyle?"无网络，请检查当前网络":3==this.pageStyle?"网络请求失败，请再次尝试":4==this.pageStyle?this.pageTitle:void 0},getCss:function(){return-1==this.pageStyle?"status-icon no-result":0==this.pageStyle?"status-icon no-network":1==this.pageStyle?"status-icon no-result":2==this.pageStyle?"status-icon no-network":3==this.pageStyle?"status-icon no-network":4==this.pageStyle?"status-icon no-xiangmu":void 0},getButton:function(){return-1==this.pageStyle?"登录":"再试一次"}}},o=a,r=i("2877"),l=Object(r["a"])(o,s,n,!1,null,"409e994e",null);e["a"]=l.exports},"6d8b":function(t,e,i){"use strict";var s=i("e7ec"),n=i.n(s);n.a},"7a87":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"didaList"}},[0==t.pageStyles?i("div",[i("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[i("van-list",{attrs:{finished:t.finished,"finished-text":t.finishedText,"error-text":t.errorText,"immediate-check":t.firstFresh},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[t._t("default")],2)],1)],1):t.noDataShow?i("div",[i("error-page",{attrs:{"page-style":t.pageStyles},on:{errorButton:t.parentReceive}})],1):t._e()])},n=[],a=(i("99af"),i("1100")),o={components:{errorPage:a["a"]},props:{firstFresh:{type:Boolean,default:!1},postUrl:{type:null,required:!0},dataName:{type:null,required:!0},reqData:{type:null,required:!0},apptypeShow:{type:Boolean,default:!0},noDataShow:{type:Boolean,default:!0}},data:function(){return{list:[],pageStyles:0,loading:!1,finished:!1,isLoading:!1,query:{},pagesize:10,xxList:[],currentPage:1,totalpageno:0,finishedText:"没有更多了",errorText:"请求失败，点击重新加载",total:0}},created:function(){this.reqNewData=this.reqData,console.info("reqData-----------------",this.reqData);var t=this;this.$bus.$on("refList",(function(e){var i=this;t.query=e,t.currentPage=1,t.getListData(e).then((function(t){i.loading=!1,i.totalpageno<=i.currentPage&&(i.finished=!0)}))}))},beforeDestroy:function(){this.$bus.$off("refList")},methods:{getListData:function(){var t=this,e=this.reqData;console.info("query--11--",this.query);if(this.apptypeShow){if(null!=this.query&&""!==this.query){var i={apptype:"APP"};this.query=Object.assign(this.query,i)}else this.query={apptype:"APP"};({pageno:this.currentPage,query:JSON.stringify(this.query)})}else console.log("this.query============================",this.query),this.query.currentPage=this.currentPage;return this.$store.dispatch(this.postUrl,Object.assign(e,this.query)).then((function(e){t.totalpageno=e.totalPages,t.pageStyles=0,0===t.totalpageno&&(t.pageStyles=1),1===t.currentPage?(t.list=t.dataName?e[t.dataName]:e,null!=t.list&&0!==t.list.length||(t.pageStyles=1),t.currentPage++):0===e.length?t.finished=!0:e.totalPages>=t.currentPage?t.list=t.list.concat(t.dataName?e[t.dataName]:e):t.finished=!0,e&&e.title?(t.xxList.data=t.list,t.xxList.title=e.title,t.$emit("returnData",t.xxList)):t.$emit("returnData",t.list)})).catch((function(e){t.$toast(e),t.loading=!1}))},parentReceive:function(){this.onRefresh(this.query)},onLoad:function(){var t=this;this.getListData().then((function(e){t.loading=!1,t.currentPage++,t.totalpageno<t.currentPage&&(t.finished=!0),console.log("this.finished==================================================",t.finished)}))},onRefresh:function(t){var e=this;this.query=null!=t&&""!==t?t:{},this.list=[],this.currentPage=1,this.getListData(1).then((function(){e.isLoading=!1,e.finished=!1}))},hideLoading:function(){this.loading=!1},hideIsLoading:function(){this.isLoading=!1}}},r=o,l=i("2877"),c=Object(l["a"])(r,s,n,!1,null,null,null);e["a"]=c.exports},"90ed":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"nav-bar"},[i("div",{staticClass:"nav-bar-left",on:{click:function(e){return t.goHome()}}},[i("i",{staticClass:"iconfont iconicon-back"})]),i("div",{staticClass:"nav-bar-title"},[t._v("请假申请信息")]),i("div",{staticClass:"nav-bar-right",on:{click:function(e){return t.showSearchPopup()}}},[i("i",{staticClass:"iconfont iconsousuo"})])]),i("div",{class:t.showRemind?"container":"container-tab"},[i("div",{staticClass:"remind-holidays",class:t.showRemind?"hide":""},[t._m(0),t._m(1),i("div",{staticClass:"remind-close",on:{click:function(e){return t.showRemindBtn()}}},[i("i",{staticClass:"iconfont iconguanbi"})])]),i("div",{staticClass:"container-mini"},[i("div",{staticClass:"content"},[i("div",{staticClass:"common-main box"},[i("div",{staticClass:"holidays-flex"},[i("div",{staticClass:"tit"},[t._v(t._s((new Date).getFullYear())+"年剩余年假")]),i("div",{staticClass:"date"},[t._v(t._s(t.synj?t.synj:0)+"天")])])])]),i("common-list",{ref:"commonlist",staticClass:"common-list",attrs:{"post-url":t.list.postUrl,"req-data":t.list.reqData,"data-name":t.list.dataName,"first-fresh":!0,"apptype-show":!1,"no-data-show":!1},on:{returnData:function(e){return t.getPrizeLog(e)}}},t._l(t.qjxxList,(function(e,s){return i("van-swipe-cell",{key:s,scopedSlots:t._u([{key:"right",fn:function(){return[i("div",{staticClass:"sideslip"},[-1===e.zt||0===e.zt||3===e.zt?i("div",{staticClass:"sideslip-item red",on:{click:function(i){return t.deleteQjxx(e)}}},[i("div",{staticClass:"icon"},[i("i",{staticClass:"iconfont iconshanchu1"})]),t._v(" 删除 ")]):t._e()])]},proxy:!0}],null,!0)},[i("div",{staticClass:"content",on:{click:function(i){return t.itemClick(e)}}},[i("div",{staticClass:"common-main box overflow-hidden relative"},[i("div",{staticClass:"title"},[i("div",{staticClass:"title-left"},[i("h2",[t._v(t._s(e.title))])])]),0===e.zt||1===e.zt||2===e.zt?i("div",{staticClass:"askleave green"},[i("span",[t._v(t._s(t.qjztMap[e.zt]))])]):i("div",{staticClass:"askleave red"},[i("span",[t._v(t._s(t.qjztMap[e.zt]))])]),i("div",{staticClass:"page-list"},[i("div",{staticClass:"pagelist-left"},[t._v("请假申请人")]),i("div",{staticClass:"pagelist-right"},[t._v(t._s(e.sqrmc))])]),i("div",{staticClass:"page-list"},[i("div",{staticClass:"pagelist-left"},[t._v("提交时间")]),i("div",{staticClass:"pagelist-right"},[t._v(t._s(t.formDate(e.cjsj)))])]),i("div",{staticClass:"page-list"},[i("div",{staticClass:"pagelist-left"},[t._v("请假天数(天)")]),i("div",{staticClass:"pagelist-right"},[t._v(t._s(e.qjts)+"天")])]),e.dxnjts?i("div",{staticClass:"page-list"},[i("div",{staticClass:"pagelist-left"},[t._v("抵扣年假天数(天)")]),i("div",{staticClass:"pagelist-right"},[t._v(t._s(e.dxnjts)+"天")])]):t._e(),i("div",{staticClass:"page-list"},[i("div",{staticClass:"pagelist-left"},[t._v("状态")]),i("div",{staticClass:"pagelist-right"},[t._v(t._s(t.qjztMap[e.zt]))])])])])])})),1)],1)]),i("van-popup",{staticClass:"search-popup",attrs:{position:"top","overlay-class":"transparent-overlay"},model:{value:t.SeachShow,callback:function(e){t.SeachShow=e},expression:"SeachShow"}},[i("div",{staticClass:"common-main box"},[i("div",{staticClass:"spe-input"},[i("van-cell",{attrs:{title:"请假状态",value:t.zhuangtai,"is-link":""},on:{click:function(e){t.QjztShow=!0}}}),i("van-cell",{attrs:{title:"请假发起时间",value:t.fqsjShow,"is-link":""},on:{click:function(e){t.show=!0}}}),i("div",{staticClass:"search-popup-btn"},[i("van-button",{attrs:{type:"info",round:"",size:"large",plain:""},on:{click:function(e){return t.reset()}}},[t._v("重置")]),i("van-button",{attrs:{type:"info",round:"",size:"large"},on:{click:function(e){return t.search()}}},[t._v("搜索")])],1)],1)])]),i("van-calendar",{attrs:{"min-date":t.minDate,color:"#1890ff"},on:{confirm:t.onConfirm},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}}),i("van-popup",{attrs:{round:"",position:"bottom"},model:{value:t.QjlxShow,callback:function(e){t.QjlxShow=e},expression:"QjlxShow"}},[i("van-picker",{attrs:{title:"请假类型","show-toolbar":"",columns:t.Qjlxcolumns},on:{confirm:t.onQjlxConfirm,cancel:function(e){t.QjlxShow=!1},change:t.onChange1}})],1),i("van-popup",{attrs:{round:"",position:"bottom"},model:{value:t.QjztShow,callback:function(e){t.QjztShow=e},expression:"QjztShow"}},[i("van-picker",{attrs:{title:"请假状态","show-toolbar":"",columns:t.Qjztcolumns},on:{confirm:t.onQjztConfirm,cancel:function(e){t.QjztShow=!1},change:t.onChange2}})],1),i("div",{staticClass:"common-space"}),i("div",{staticClass:"foot-btn fixed"},[i("ul",[i("li",[i("van-button",{attrs:{type:"info",round:"",size:"large"},on:{click:function(e){return t.goZjQjxx()}}},[t._v("新增")])],1)])])],1)},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"remind-tit"},[i("i",{staticClass:"iconfont icontongzhi1"}),t._v(" 温馨提醒：")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"remind-content"},[t._v(" 1、婚假(5天)、产假(4个月)、陪产假(5天)、丧假(5天)为带薪假期，不视为请假，超过标准天数的按事假处理。"),i("br"),t._v(" 2、如果上午请假，下午正常上班，请在APP上申报下午的工作状态。 3、丧假： 员工及配偶父母、子女、配偶去世，可集中休一次5个工作日丧假。 ")])}],a=(i("99af"),i("fb6a"),i("1276"),i("7a87")),o={name:"TbGzrz",components:{commonList:a["a"]},data:function(){return{show:!1,fqsjShow:"请选择时间",fqsj:"",qjztMap:{0:"初始化",1:"提交审批",2:"审批通过","-1":"已撤销",3:"退回"},qjztMap1:{"初始化":0,"提交审批":1,"审批通过":2,"已撤销":-1,"退回":3,"全部":"","请选择状态":""},list:{items:[],error:!1,postUrl:"",reqData:"",dataName:"",noDataText:""},qjlxMap:{BSJ:"事假",NJ:"年假",HJ:"婚假",CJ:"产假",PCJ:"陪产假",SJ:"丧假",TX:"调休",PKJ:"陪考假"},headerData:{title:"请假申请信息",leftUrl:"back",leftText:" "},qjxxList:[],synj:"",SeachShow:!1,QjlxShow:!1,showRemind:!1,QjztShow:!1,leixing:"选择考勤类型",zhuangtai:"请选择状态",Qjlxcolumns:["全部","事假","婚假","产假","陪产假","丧假","调休"],Qjztcolumns:["全部","初始化","提交审批","审批通过","退回","已撤销"],minDate:new Date(1999,0,1)}},created:function(){this.getSynj(),this.getQjxx()},methods:{itemClick:function(t){0===t.zt||-1===t.zt||3===t.zt?this.editQjxx(t):this.goQjxxXq(t)},editQjxx:function(t){this.$router.push({name:"ZjQjxx",params:{qjxx:t,title:"修改请假信息"}})},reset:function(){this.zhuangtai="请选择状态",this.fqsjShow="请选择时间",this.fqsj=""},search:function(){this.SeachShow=!1,this.$refs.commonlist.onRefresh({ygbh:this.$store.state.mh.mhUserInfo.id,fqsj:this.fqsj,qjbh:"",zt:this.qjztMap1[this.zhuangtai]})},onConfirm:function(t){this.fqsjShow=this.formatDate(t),this.fqsj=this.formatDate1(t),this.show=!1},formatDate:function(t){return"".concat(t.getFullYear(),"/").concat(t.getMonth()+1,"/").concat(t.getDate())},formatDate1:function(t){var e=t.getFullYear(),i="",s="";return i=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,s=t.getDate()<10?"0"+t.getDate():t.getDate(),e+""+i+s},goQjxxXq:function(t){this.$router.push({name:"QjxxXq",params:{qjxx:t}})},deleteQjxx:function(t){var e=this;this.$store.dispatch("erp/deleteQjxxAction",{id:t.id}).then((function(t){e.$toast("删除成功！"),e.$refs.commonlist.onRefresh()})).catch((function(t){return[e.$toast(t)]}))},getPrizeLog:function(t){this.qjxxList=t;for(var e=0;e<this.qjxxList.length;e++){var i=this.qjxxList[e].qjlx.split(","),s="";console.log("arr==========================================================",i);for(var n=0;n<i.length;n++)n!==i.length-1?s+=this.qjlxMap[i[n]]+"+":s+=this.qjlxMap[i[n]];this.qjxxList[e].title=s}},getQjxx:function(){this.list.postUrl="erp/getQjxxAction",this.list.reqData={ygbh:this.$store.state.mh.mhUserInfo.id,fqsj:this.fqsj,qjbh:"",zt:""},this.list.dataName="xz_qjsqs",this.list.noDataText="暂无数据"},getSynj:function(){var t=this;this.$store.dispatch("erp/getSynjAction",{ygbh:this.$store.state.mh.mhUserInfo.id,nf:""}).then((function(e){t.synj=e})).catch((function(t){console.log(t)}))},onChange1:function(){},onChange2:function(){},onQjlxConfirm:function(t){this.leixing=t,this.QjlxShow=!1},onQjztConfirm:function(t){this.zhuangtai=t,this.QjztShow=!1},showSearchPopup:function(){this.SeachShow=!0},goHome:function(){this.$router.back()},goZjQjxx:function(){this.$router.push({name:"ZjQjxx"})},formDate:function(t){return t+="",t.slice(0,4)+"-"+t.slice(4,6)+"-"+t.slice(6,8)},showRemindBtn:function(){this.showRemind=!this.showRemind}}},r=o,l=(i("6d8b"),i("2877")),c=Object(l["a"])(r,s,n,!1,null,"75d6cee1",null);e["default"]=c.exports},e7ec:function(t,e,i){}}]);
//# sourceMappingURL=QjList.37466a2f.js.map