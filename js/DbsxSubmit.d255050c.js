(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["DbsxSubmit","WdxmBj"],{1100:function(t,i,s){"use strict";var e=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"error-main"},[0!=t.pageStyle?s("div",{staticClass:"status"},[s("div",{class:t.getCss()}),s("h3",[t._v(t._s(t.getTitle()))]),s("van-button",{directives:[{name:"show",rawName:"v-show",value:t.showButton,expression:"showButton"}],attrs:{type:"info"},on:{click:t.errorButton}},[t._v(t._s(t.getButton()))])],1):t._e()])},a=[],n={name:"Error",props:{pageStyle:{type:null,required:!0},showButton:{default:!0,type:Boolean}},data:function(){return{}},watch:{pageTitle:function(t){}},created:function(){},methods:{errorButton:function(){-1==this.pageStyle?this.$router.push("/login"):this.$emit("errorButton")},getTitle:function(){return-1==this.pageStyle?"未登录，请先登录":0==this.pageStyle?"正常状态不显示":1==this.pageStyle?"暂无数据":2==this.pageStyle?"无网络，请检查当前网络":3==this.pageStyle?"网络请求失败，请再次尝试":4==this.pageStyle?this.pageTitle:void 0},getCss:function(){return-1==this.pageStyle?"status-icon no-result":0==this.pageStyle?"status-icon no-network":1==this.pageStyle?"status-icon no-result":2==this.pageStyle?"status-icon no-network":3==this.pageStyle?"status-icon no-network":4==this.pageStyle?"status-icon no-xiangmu":void 0},getButton:function(){return-1==this.pageStyle?"登录":"再试一次"}}},o=n,r=s("2877"),l=Object(r["a"])(o,e,a,!1,null,"409e994e",null);i["a"]=l.exports},"445c":function(t,i,s){"use strict";var e=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("header",{staticClass:"nav-bar"},[t.headerData.leftText?s("div",{staticClass:"nav-bar-left"},[s("div",{on:{click:function(i){return i.stopPropagation(),t.handelClick(t.headerData.leftUrl)}}},[s("i",{staticClass:"iconfont iconicon-back"}),s("div",{staticClass:"nav-bar-txt"},[t._v(t._s(t.headerData.leftText))])])]):t._e(),s("div",{staticClass:"nav-bar-title"},[t._v(t._s(t.headerData.title))]),s("div",{staticClass:"nav-bar-right"},[t.headerData.rightText?s("div",{staticClass:"nav-bar-txt",on:{click:function(i){return t.handelClick(t.headerData.rightUrl,t.headerData.rightCallBackClick)}}},[t._v(t._s(t.headerData.rightText))]):t._e(),t.headerData.showSearch?s("i",{staticClass:"iconfont iconsousuo",on:{click:function(i){return t.searchClick()}}}):t._e()])])},a=[],n={name:"HeaderBar",props:{headerData:{type:null,required:!0}},data:function(){return{}},created:function(){this.headerData&&(this.headerData.rightCallBackClick||(this.headerData.rightCallBackClick=!1))},methods:{searchClick:function(){this.$bus.$emit("showMeun",!0)},handelClick:function(t,i){if(console.log("targetUrl=====================",t),"back"!==t)if("needConfirm"!==t){if(t)this.$router.push(t);else if(i){var s="callback";this.headerData&&this.headerData.rightText&&(s=this.headerData.rightText),this.$emit("callbackClick",s)}}else this.$emit("on-exit");else this.$router.go(-1)}}},o=n,r=s("2877"),l=Object(r["a"])(o,e,a,!1,null,"416ac0a2",null);i["a"]=l.exports},"498a":function(t,i,s){"use strict";var e=s("23e7"),a=s("58a8").trim,n=s("e070");e({target:"String",proto:!0,forced:n("trim")},{trim:function(){return a(this)}})},"510f":function(t,i,s){"use strict";s.d(i,"d",(function(){return r})),s.d(i,"a",(function(){return l})),s.d(i,"b",(function(){return c}));s("a4d3"),s("4de4"),s("c975"),s("a434"),s("b0c0"),s("e439"),s("dbb4"),s("b64b"),s("159b");var e=s("ade3"),a=s("2f62");function n(t,i){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);i&&(e=e.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),s.push.apply(s,e)}return s}function o(t){for(var i=1;i<arguments.length;i++){var s=null!=arguments[i]?arguments[i]:{};i%2?n(Object(s),!0).forEach((function(i){Object(e["a"])(t,i,s[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(s,i))}))}return t}var r={mounted:function(){},data:function(){return{}},methods:{goPage:function(t,i){this.$store.dispatch("router/setPageParams",i),this.$router.push({name:t,params:{keyName:i}})},getParams:function(){return this.$store.state.router.pageParams}},beforeRouteEnter:function(t,i,s){s((function(i){if("MhHome"!==t.name&&"MallHome"!==t.name){var s=i.$store.state.router.keepAlive,e=s.indexOf(t.name);-1===e&&s.push(t.name),i.$store.commit("router/SET_KEEP_ALIVE",s)}else i.$store.commit("router/SET_KEEP_ALIVE",[]);console.log("PageRoute=进入页面==",s)}))},beforeRouteLeave:function(t,i,s){var e=[];if(e=this.$store.state.router.keepAlive,"GysXmbm"===i.name){var a=e.indexOf(i.name);e.splice(a,1)}var n=e.indexOf(i.name),o=e.indexOf(t.name);-1!==o&&e.splice(n,1);for(var r=[],l=0;l<this.$store.state.router.footMeun.length;l++)r.push(this.$store.state.router.footMeun[l].component);var c=r.indexOf(i.name),u=r.indexOf(t.name);-1!==c&&-1!==u&&e.splice(n,1),console.log("PageRoute=退出页面======================",e),this.$store.commit("router/SET_KEEP_ALIVE",e),s()}},l={mounted:function(){var t=this;window["showSoftKeyBoard"]=function(i){console.info("showSoftKeyBoard-----",i),t.Native_ShowSoftKeyBoard=i},window["getRotuerPage"]=function(i){return t.$store.state.router.keepAlive},window["updateScanData"]=function(i){console.info("updateScan======",i),t.Native_ScanData=i},window["updateHandImage"]=function(i){t.Native_PhoneImageData=i}},data:function(){return{Native_ShowSoftKeyBoard:"",Native_ScanData:{},Native_PhoneImageData:{},Native_CaLoad:"",Native_CaList:{}}},computed:{},methods:{NativeLoadCA:function(){var t=this;try{this.Native_CaLoad=window.myapp.LoadCA(),console.info("NativeLoadCA======",window.myapp.LoadCA())}catch(i){console.log(i)}this.$bridge.callhandler("LoadCA","{page:1}",(function(i){var s=JSON.parse(i);console.log("goScanView------",i),t.Native_CaLoad=s}))},NativeGetAllCAInfo:function(){try{console.info("NativeGetAllCAInfo======",window.myapp.getAllCAInfo());var t=window.myapp.getAllCAInfo();this.Native_CaList=JSON.parse(t)}catch(i){console.log(i)}this.$bridge.callhandler("getAllCAInfo",(function(t){}))},NativeGetOnelCAInfo:function(t){try{console.info("NativeGetAllCAInfo======",window.myapp.getOneCAInfo())}catch(i){console.log(i)}this.$bridge.callhandler("getOneCAInfo",t,(function(t){}))},NativeChangePin:function(t){try{window.myapp.changePin(t)}catch(i){console.log(i)}this.$bridge.callhandler("changePin",t,(function(t){}))},NativeEnvelopeDecrypt:function(t){try{window.myapp.envelopeDecrypt(t)}catch(i){console.log(i)}this.$bridge.callhandler("envelopeDecrypt",t,(function(t){}))},NativeEnvelopeEncrypt:function(t){try{window.myapp.envelopeEncrypt(t)}catch(i){console.log(i)}this.$bridge.callhandler("envelopeEncrypt",t,(function(t){}))}}},c={mounted:function(){var t=this;window["getRotuerPage"]=function(i){return t.$store.state.router.keepAlive},window["updateScanData"]=function(i){console.info("updateScan======",i),t.Native_ScanData=i},window["updateHandImage"]=function(i){t.Native_PhoneImageData=i}},data:function(){return{Native_ScanData:{},Native_PhoneImageData:{}}},computed:{},methods:{NativeAddPush:function(t){try{window.myapp.addPush(t)}catch(i){console.log(i)}this.$bridge.callhandler("addPush",t,(function(t){}))},NativeDissPush:function(){try{window.myapp.dissPush()}catch(t){console.log(t)}this.$bridge.callhandler("dissPush",(function(t){}))},NativeDissDialog:function(){try{window.myapp.dissDialog()}catch(t){console.log(t)}this.$bridge.callhandler("dissDialog",(function(t){}))},NativeLoginAction:function(t){try{window.myapp.loginAction(t)}catch(i){console.log(i)}this.$bridge.callhandler("loginAction",t,(function(t){}))},NativeCheakUpdate:function(){try{window.myapp.cheakUpdate()}catch(t){console.log(t)}this.$bridge.callhandler("cheakUpdate",(function(t){}))},NativeGetLjSize:function(){try{window.myapp.getlj()}catch(t){console.log(t)}this.$bridge.callhandler("getlj",(function(t){}))},NativeCleanLj:function(){try{window.myapp.cleanlj()}catch(t){console.log(t)}this.$bridge.callhandler("cleanlj",(function(t){}))},NativeDownFiles:function(t){try{window.myapp.downloadFile(t)}catch(i){console.log(i)}this.$bridge.callhandler("downloadFile",String(t),(function(t){}))},NativeScan:function(){var t=this;try{window.myapp.goScanView()}catch(i){console.log(i)}this.$bridge.callhandler("goScanView","{page:1}",(function(i){var s=JSON.parse(i);console.log("goScanView------",i),t.Native_ScanData=s}))},NativePhone:function(t){var i=this;try{window.myapp.goIDCards(t)}catch(s){console.log(s)}this.$bridge.callhandler("goIDCards",t,(function(t){var s=JSON.parse(t);console.log("goIDCards------",s),i.Native_PhoneImageData=s}))},NativeHandSing:function(){var t=this;try{window.myapp.goHandWriteView()}catch(i){console.log(i)}this.$bridge.callhandler("goHandWriteView",(function(i){t.Native_PhoneImageData=i}))},NativeCallPhone:function(t){try{window.myapp.call(t)}catch(i){console.log(i)}this.$bridge.callhandler("call",t,(function(t){}))},NativeUpdateImage:function(){try{window.myapp.CameraOrImage()}catch(t){console.log(t)}this.$bridge.callhandler("CameraOrImage",(function(t){}))}}};o({onQueryChange:function(t){this.query=t},blurInput:function(){this.$refs.searchBox.blur()},addQuery:function(t){this.$refs.searchBox.setQuery(t)},saveSearch:function(){this.updateHostorList(this.query)}},Object(a["b"])(["updateHostorList","deleteSearchHistory"])),o({wybmAction:function(){this.wybmfbAction()}},Object(a["b"])(["wybmfbAction"]))},"5a35":function(t,i,s){"use strict";s.r(i);var e=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"spyj-page"},[s("headerBar",{attrs:{"header-data":t.headerData}}),s("div",{staticClass:"fixed-project"},[s("div",{staticClass:"list"},[s("h3",[t._v(t._s(t.dbxq.lcslmc))]),s("div",{staticClass:"info"},[s("span",[s("i",{staticClass:"iconfont iconlianxiren"}),t._v(" "+t._s(t.dbxq.preUsers)+" ")]),s("span",[s("i",{staticClass:"iconfont iconshijian"}),t._v(" "+t._s(t.dbxq.showTime)+" ")]),s("span",[s("i",{staticClass:"iconfont iconpingbiaobaogao"}),t._v(" "+t._s(t.dbxq.rwmc)+" ")])])])]),s("div",{staticClass:"container-mini"},[null!=t.submitResultMap.submitTaskList&&t.submitResultMap.submitTaskList.length>0?s("div",[s("div",{staticClass:"content"},[s("div",{staticClass:"common-main box"},[t._m(0),t._l(t.submitResultMap.submitTaskList,(function(i,e){return s("div",{key:e},[i.isZlc?s("div",[t._v(" 子流程 ")]):s("div",[null!=i.generatorid?s("div",[t._v(" 任务生成自定义 ")]):2===i.isCanChoose&&null!=i.actors&&i.actors.length>0?s("div",{staticClass:"page-list"},[s("div",{staticClass:"pagelist-left"},[t._v(t._s(i.name))]),s("div",{staticClass:"pagelist-right"},[t._v(t._s(i.detail))])]):null!=i.actors&&i.actors.length>0?s("div",[s("van-cell",{attrs:{title:i.name,value:i.xzActorsVal,"is-link":""},on:{click:function(i){return t.showXzActorsPopup(e,0)}}}),s("van-popup",{style:{height:"40%"},attrs:{position:"bottom",closeable:""},model:{value:i.showXzActors,callback:function(s){t.$set(i,"showXzActors",s)},expression:"submitTask.showXzActors"}},[s("div",{staticClass:"content"},t._l(i.actors,(function(i,e){return s("div",{key:e},[s("div",{class:i.isActive?"active select-renyuan":"select-renyuan",on:{click:function(s){return t.selectRy(i)}}},[s("div",{staticClass:"renyuan-l"},[s("i",{staticClass:"iconfont iconxuanzhong"})]),s("div",{staticClass:"renyuan-m"},[s("div",{staticClass:"name"},[t._v(t._s(i.name))]),s("div",{staticClass:"info"},[s("span",[t._v("公司:"+t._s(i.orgName))]),s("span",[t._v("部门:"+t._s(i.deptName))])])])])])})),0),s("div",{staticClass:"common-space"}),s("div",{staticClass:"foot-btn fixed"},[s("ul",[s("li",[s("van-button",{attrs:{type:"info",round:"",size:"large"},on:{click:t.xzActorsOnConfirm}},[t._v("确定")])],1)])])])],1):s("div",[s("van-cell",{attrs:{title:i.name,value:i.xzActorsVal,"is-link":""},on:{click:function(i){return t.showXzActorsPopup(e,1)}}})],1)]),null!=i.preTaskList&&i.preTaskList.length>0?s("div",[s("van-notice-bar",{attrs:{wrapable:"",scrollable:!1,text:"未提交的并行任务:"+i.bxrwString}})],1):t._e()])}))],2)])]):7!=t.rwlx&&-1!=t.rwlx?s("div",[s("van-notice-bar",{attrs:{scrollable:!1,text:"提交之后，流程将结束。"}})],1):t._e(),null!=t.submitResultMap.managingTaskList&&t.submitResultMap.managingTaskList.length>0?s("div",[s("div",{staticClass:"content"},[s("div",{staticClass:"common-main box"},[t._m(1),t._l(t.submitResultMap.managingTaskList,(function(i,e){return s("div",{key:e},[s("van-cell",{attrs:{title:i.name,value:i.xzActorsVal,"is-link":""},on:{click:function(i){return t.showXzActorsPopup(e,2)}}})],1)}))],2)])]):t._e(),null!=t.dbxq.tjyjbt&&3!=t.dbxq.tjyjbt?s("div",{staticClass:"content"},[s("div",{staticClass:"common-main box"},[s("div",{staticClass:"txyj"},[s("div",{staticClass:"txyj-tit"},[null!=t.dbxq.tjyjbt&&1===t.dbxq.tjyjbt?s("span",{staticClass:"text-danger"},[t._v("*")]):t._e(),t._v(" "+t._s(t.dbxq.taskCommentLabel)+" "),s("div",{staticClass:"label-text info"},[t._v("同意")]),s("span",{staticClass:"more",on:{click:function(i){return t.showCyyPopup()}}},[t._v("选择常用语 "),s("i",{staticClass:"iconfont iconarrowright"})])]),s("div",{staticClass:"txyj-content"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.spyj,expression:"spyj"}],attrs:{rows:"3",placeholder:"请输入"+t.dbxq.taskCommentLabel},domProps:{value:t.spyj},on:{input:function(i){i.target.composing||(t.spyj=i.target.value)}}}),t._v(" "),t.submitResultMap.zxrString&&""!==t.submitResultMap.zxrString?s("div",[t._v(" 当前任务是多人并行提交，"+t._s(t.submitResultMap.zxrString)+"还未提交，将在其余人员提交后进入下一步。 ")]):t._e()])])])]):t.submitResultMap.zxrString&&""!==t.submitResultMap.zxrString?s("div",{staticClass:"content"},[s("div",{staticClass:"common-main box"},[t._v(" 当前任务是多人并行提交，"+t._s(t.submitResultMap.zxrString)+"还未提交，将在其余人员提交后进入下一步。 ")])]):t._e(),s("div",{staticClass:"common-space"}),s("div",{staticClass:"foot-btn fixed"},[s("ul",[s("li",[s("van-button",{attrs:{type:"info",round:"",size:"large"},on:{click:function(i){return t.subimitSPYJ()}}},[t._v("提交")])],1)])])]),s("transition",{attrs:{name:"router-slid",mode:"out-in"}},[s("router-view")],1),s("van-popup",{attrs:{position:"bottom",round:""},model:{value:t.showCyy,callback:function(i){t.showCyy=i},expression:"showCyy"}},[s("van-picker",{attrs:{"show-toolbar":"",columns:t.cyyList,"value-key":"nr"},on:{cancel:function(i){t.showCyy=!1},confirm:t.xzCyyOnConfirm}})],1),s("van-popup",{style:{height:"100%"},attrs:{closeable:"",position:"bottom"},on:{close:function(i){return t.closePoPup()}},model:{value:t.showXzRy,callback:function(i){t.showXzRy=i},expression:"showXzRy"}},[s("van-index-bar",{attrs:{"index-list":t.indexList}},[s("div",{staticClass:"content"},[s("van-sticky",{staticClass:"van-sticky-approve"},[s("div",{staticClass:"close-button",on:{click:function(i){return t.closePoPup()}}},[s("i",{staticClass:"iconfont iconguanbi"})]),s("div",{staticClass:"select-search"},[s("van-search",{attrs:{placeholder:"请输入搜索关键词"},model:{value:t.searchVal,callback:function(i){t.searchVal=i},expression:"searchVal"}}),s("van-button",{attrs:{plain:"",type:"info",size:"small"},on:{click:function(i){return t.searchRy()}}},[t._v("搜索")])],1),s("div",{staticClass:"selected-renyuan"},[s("dl",[s("dt",[t._v("已选")]),s("dd",t._l(t.yxryList,(function(i,e){return s("span",{key:e,staticClass:"item"},[t._v(t._s(i.xm))])})),0)])])]),s("common-list",{ref:"commonlist",staticClass:"common-list",attrs:{"post-url":t.list.postUrl,"req-data":t.list.reqData,"data-name":t.list.dataName},on:{returnData:function(i){return t.getPrizeLog(i)}}},t._l(t.list.items,(function(i,e){return s("div",{key:e},[i["xs"+i.ryxs]?s("div",[s("van-index-anchor",{attrs:{index:i["xs"+i.ryxs]}})],1):s("div",[s("div",{staticClass:"select-renyuan",class:{active:i.isActive},on:{click:function(s){return t.selectRy(i)}}},[s("div",{staticClass:"renyuan-l"},[s("i",{staticClass:"iconfont iconxuanzhong"})]),s("div",{staticClass:"renyuan-m"},[s("div",{staticClass:"name"},[t._v(t._s(i.xm))]),s("div",{staticClass:"info"},[s("span",[t._v("公司:"+t._s(i.zzmc))]),s("span",[t._v("部门:"+t._s(i.bmmc))])])])])])])})),0)],1),s("div",{staticClass:"common-space"}),s("div",{staticClass:"foot-btn fixed"},[s("ul",[s("li",[s("van-button",{attrs:{type:"info",round:"",size:"large"},on:{click:t.xzMutilActorsOnConfirm}},[t._v("确定")])],1)])])])],1),s("van-dialog",{attrs:{title:"审批成功！","confirm-button-text":"返回待办"},on:{confirm:function(i){return t.spwc()}},model:{value:t.show3,callback:function(i){t.show3=i},expression:"show3"}})],1)},a=[function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"title"},[s("div",{staticClass:"title-left"},[s("h2",[t._v("下一步任务")])])])},function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"title"},[s("div",{staticClass:"title-left"},[s("h2",[t._v("管理任务")])])])}],n=(s("a4d3"),s("4de4"),s("c740"),s("c975"),s("a434"),s("b0c0"),s("e439"),s("dbb4"),s("b64b"),s("498a"),s("159b"),s("ade3")),o=s("445c"),r=s("6595"),l=s("2f62"),c=s("251e"),u=s("510f");function h(t,i){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);i&&(e=e.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),s.push.apply(s,e)}return s}function d(t){for(var i=1;i<arguments.length;i++){var s=null!=arguments[i]?arguments[i]:{};i%2?h(Object(s),!0).forEach((function(i){Object(n["a"])(t,i,s[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):h(Object(s)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(s,i))}))}return t}var p={name:"DbsxSubmit",components:{headerBar:o["a"],commonList:r["a"]},mixins:[u["d"]],data:function(){return{show3:!1,submitResultMap:{},spyj:"",dbxq:{},headerData:{title:"待办审批",leftUrl:"back",leftText:" "},dqindex:-1,yxryList:[],ryMap:{},searchVal:"",showCyy:!1,showXzRy:!1,cyyList:[],pageno:1,totalpageno:0,prizeLog:[],indexList:[],list:{items:[],error:!1,postUrl:"",reqData:"",dataName:"",noDataText:""},rwlx:-1,dqtype:-1,buttonState:!0}},computed:d({},Object(l["d"])({txBizid:function(t){return t.jbrdbsx.txBizid},spxz:function(t){return t.jbrdbsx.spxz},userInfo:function(t){return t.mh.mhUserInfo}})),created:function(){this.initTaskData(),this.getDbxq(),this.getcyylist(),this.getrylist()},methods:d({},Object(l["c"])(["jbrdbsx/SET_DBSX_CYY","jbrdbsx/SET_Refresh"]),{initTaskData:function(){this.getSubmitTaskList()},getDbxq:function(){var t=this;this.$store.dispatch("jbrdbsx/getDbxqAction",{bizid:this.txBizid}).then((function(i){t.dbxq=i})).catch((function(){}))},getPrizeLog:function(t){this.list.items=t;for(var i=0;i<this.list.items.length;i++){var s=this.list.items[i].ryxs;this.list.items[i]["xs"+s]&&-1===this.indexList.indexOf(this.list.items[i]["xs"+s])&&this.indexList.push(this.list.items[i]["xs"+s]);for(var e=0;e<this.yxryList.length;e++)this.list.items[i].id===this.yxryList[e].id&&(this.list.items[i].isActive=!0)}},getrylist:function(){this.list.postUrl="jbrdbsx/getRyListAction",this.list.reqData={dqbmid:this.userInfo.bmid},this.list.dataName="ryList",this.list.noDataText="暂无可选人员"},searchRy:function(){this.indexList=[];var t={rymc:this.searchVal};this.$refs.commonlist.onRefresh(t)},getSubmitTaskList:function(){var t=this;Object(c["e"])({id:this.txBizid}).then((function(i){for(var s=0;s<i.submitTaskList.length;s++){if(i.submitTaskList[s].xzActorsVal="选择人员",i.submitTaskList[s].showXzActors=!1,i.submitTaskList[s].bxrwString="",i.submitTaskList[s].yxryList=[],i.submitTaskList[s].preTaskList)for(var e=0;e<i.submitTaskList[s].preTaskList.length;e++)e===i.submitTaskList[s].preTaskList.length-1?i.submitTaskList[s].bxrwString+=i.submitTaskList[s].preTaskList[e].name:i.submitTaskList[s].bxrwString+=i.submitTaskList[s].preTaskList[e].name+",";if(i.submitTaskList[s].actors)for(var a=0;a<i.submitTaskList[s].actors.length;a++)i.submitTaskList[s].actors[a].isActive=!1}if(i.managingTaskList)for(var n=0;n<i.managingTaskList.length;n++)i.managingTaskList[n].xzActorsVal="选择人员";t.submitResultMap=i,t.rwlx=t.submitResultMap.wf_rwsl.rwlx}))},xzActorsOnConfirm:function(){var t="",i="",s="",e="",a="",n=this.submitResultMap.submitTaskList[this.dqindex].yxryList;if(n)for(var o=0;o<n.length;o++)o===n.length-1?(t+=n[o].id,i+=n[o].name,s+=n[o].deptid,e+=n[o].deptName,a+=n[o].orgid):(t+=n[o].id+",",i+=n[o].name+",",s+=n[o].deptid+",",e+=n[o].deptName+",",a+=n[o].orgid+",");this.submitResultMap.submitTaskList[this.dqindex].xzActorsId=t,this.submitResultMap.submitTaskList[this.dqindex].xzActorsVal=""===i?"选择人员":i,this.submitResultMap.submitTaskList[this.dqindex].xzActorsDeptid=s,this.submitResultMap.submitTaskList[this.dqindex].xzActorsDeptName=e,this.submitResultMap.submitTaskList[this.dqindex].xzActorsOrgid=a,this.submitResultMap.submitTaskList[this.dqindex].showXzActors=!1},xzMutilActorsOnConfirm:function(){var t="",i="",s="",e="",a="",n=this.yxryList;if(n)for(var o=0;o<n.length;o++)o===n.length-1?(t+=n[o].id,i+=n[o].xm,s+=n[o].bmid,e+=n[o].bmmc,a+=n[o].zzid):(t+=n[o].id+",",i+=n[o].xm+",",s+=n[o].bmid+",",e+=n[o].bmmc+",",a+=n[o].zzid+",");1===this.dqtype?(this.submitResultMap.submitTaskList[this.dqindex].yxrylist=n,this.submitResultMap.submitTaskList[this.dqindex].xzActorsId=t,this.submitResultMap.submitTaskList[this.dqindex].xzActorsVal=""===i?"选择人员":i,this.submitResultMap.submitTaskList[this.dqindex].xzActorsDeptid=s,this.submitResultMap.submitTaskList[this.dqindex].xzActorsDeptName=e,this.submitResultMap.submitTaskList[this.dqindex].xzActorsOrgid=a):2===this.dqtype&&(this.submitResultMap.managingTaskList[this.dqindex].yxrylist=n,this.submitResultMap.managingTaskList[this.dqindex].xzActorsId=t,this.submitResultMap.managingTaskList[this.dqindex].xzActorsVal=""===i?"选择人员":i,this.submitResultMap.managingTaskList[this.dqindex].xzActorsDeptid=s,this.submitResultMap.managingTaskList[this.dqindex].xzActorsDeptName=e,this.submitResultMap.managingTaskList[this.dqindex].xzActorsOrgid=a),this.showXzRy=!1,""!==this.searchVal&&(this.searchVal="",this.searchRy())},xzCyyOnConfirm:function(t){this.spyj=t.nr,this.showCyy=!1},selectRy:function(t){if(0===this.dqtype)if(t.isActive){t.isActive=!1;var i=this.submitResultMap.submitTaskList[this.dqindex].yxryList.findIndex((function(i){if(i.id===t.id)return!0}));this.submitResultMap.submitTaskList[this.dqindex].yxryList.splice(i,1)}else t.isActive=!0,this.submitResultMap.submitTaskList[this.dqindex].yxryList.push(t);else if(t.isActive){t.isActive=!1;var s=this.yxryList.findIndex((function(i){if(i.id===t.id)return!0}));this.yxryList.splice(s,1)}else t.isActive=!0,this.yxryList.push(t)},subimitSPYJ:function(){this.buttonState&&this.clickSP()},clickSP:function(){var t=this;this.buttonState=!1,this.spyj&&(this.spyj=this.spyj.trim());for(var i=!0,s=!0,e=0;e<this.submitResultMap.submitTaskList.length;e++)if("选择人员"===this.submitResultMap.submitTaskList[e].xzActorsVal&&(2!==this.submitResultMap.submitTaskList[e].isCanChoose||null===this.submitResultMap.submitTaskList[e].actors||0===this.submitResultMap.submitTaskList[e].actors.length)){i=!1;break}if(this.submitResultMap.managingTaskList)for(var a=0;a<this.submitResultMap.managingTaskList.length;a++)if("选择人员"===this.submitResultMap.managingTaskList[a].xzActorsVal){i=!1;break}if(null!=this.dbxq.tjyjbt&&1===this.dbxq.tjyjbt&&(null!==this.spyj&&0!==this.spyj.length||(s=!1)),s&&i){for(var n="",o=0;o<this.submitResultMap.submitTaskList.length;o++)if(this.submitResultMap.submitTaskList[o].xzActorsId){var r="{taskid:'"+this.submitResultMap.submitTaskList[o].id+"',ryid:'"+this.submitResultMap.submitTaskList[o].xzActorsId+"',rymc:'"+this.submitResultMap.submitTaskList[o].xzActorsVal+"',bmid:'"+this.submitResultMap.submitTaskList[o].xzActorsDeptid+"',bmmc:'"+this.submitResultMap.submitTaskList[o].xzActorsDeptName+"',zzid:'"+this.submitResultMap.submitTaskList[o].xzActorsOrgid+"'}";o===this.submitResultMap.submitTaskList.length-1?n+=r:n+=r+","}n="["+n+"]";var l="";if(this.submitResultMap.managingTaskList)for(var c=0;c<this.submitResultMap.managingTaskList.length;c++)if(this.submitResultMap.managingTaskList[c].xzActorsId){var u="{taskid:'"+this.submitResultMap.managingTaskList[c].id+"',ryids:'"+this.submitResultMap.managingTaskList[c].xzActorsId+"',sfzx:'"+this.submitResultMap.managingTaskList[c].isExecute+"'}";c===this.submitResultMap.managingTaskList.length-1?l+=u:l+=u+","}l="["+l+"]",this.$store.dispatch("jbrdbsx/sendSP",{id:this.txBizid,taskComment:this.spyj,ryid:n,manageryid:l,dqjgid:this.userInfo.zzid,dqryid:this.userInfo.id}).then((function(i){t.show3=!0})).catch((function(i){t.buttonState=!0,t.$toast(i)}))}else i?(this.buttonState=!0,this.$toast("请设置审批意见")):(this.buttonState=!0,this.$toast("请选择人员"))},spwc:function(){this.$router.push({name:"DbsxIndex"})},getcyylist:function(){var t=this;this.$store.dispatch("jbrdbsx/getCyyListAction",{pageno:this.pageno,id:this.userInfo.id}).then((function(i){t.cyyList=i.data,t.pageno=i.pageno,t.totalpageno=i.totalpageno})).catch((function(){}))},saveCyy:function(){var t=this;null!=this.spyj&&0!==this.spyj.length?this.$store.dispatch("jbrdbsx/saveCyyAction",{nr:this.spyj,ryid:this.userInfo.id}).then((function(i){t.$toast("保存成功！"),t.getcyylist()})).catch((function(){})):this.$toast(this.dbxq.taskCommentLabel+"为空，不能保存为常用语!")},showCyyPopup:function(){0===this.cyyList.length?this.$toast.fail("常用语为空，请手动输入"):this.showCyy=!0},closePoPup:function(){""!==this.searchVal&&(this.searchVal="",this.searchRy()),this.showXzRy=!1},showXzActorsPopup:function(t,i){if(this.dqindex=t,this.dqtype=i,0===i)this.submitResultMap.submitTaskList[this.dqindex].showXzActors=!0;else if(1===i){if(null!=this.submitResultMap.submitTaskList[this.dqindex].yxrylist&&this.submitResultMap.submitTaskList[this.dqindex].yxrylist.length>0){this.yxryList=this.submitResultMap.submitTaskList[this.dqindex].yxrylist;for(var s=0;s<this.list.items.length;s++){this.list.items[s].isActive=!1;for(var e=0;e<this.yxryList.length;e++)this.list.items[s].id===this.yxryList[e].id&&(this.list.items[s].isActive=!0)}}else{for(var a=0;a<this.list.items.length;a++)this.list.items[a].isActive=!1;this.yxryList=[]}this.showXzRy=!0}else if(2===i){if(null!=this.submitResultMap.managingTaskList[this.dqindex].yxrylist&&this.submitResultMap.managingTaskList[this.dqindex].yxrylist.length>0){this.yxryList=this.submitResultMap.managingTaskList[this.dqindex].yxrylist;for(var n=0;n<this.list.items.length;n++){this.list.items[n].isActive=!1;for(var o=0;o<this.yxryList.length;o++)this.list.items[n].id===this.yxryList[o].id&&(this.list.items[n].isActive=!0)}}else{for(var r=0;r<this.list.items.length;r++)this.list.items[r].isActive=!1;this.yxryList=[]}this.showXzRy=!0}}})},m=p,f=(s("cf8d"),s("2877")),g=Object(f["a"])(m,e,a,!1,null,"069eef28",null);i["default"]=g.exports},6595:function(t,i,s){"use strict";var e=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{attrs:{id:"didaList"}},[0==t.pageStyles?s("div",[s("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(i){t.isLoading=i},expression:"isLoading"}},[s("van-list",{attrs:{finished:t.finished,"finished-text":t.finishedText,"error-text":t.errorText},on:{load:t.onLoad},model:{value:t.loading,callback:function(i){t.loading=i},expression:"loading"}},[t._t("default")],2)],1)],1):s("div",[s("error-page",{attrs:{"page-style":t.pageStyles},on:{errorButton:t.parentReceive}})],1)])},a=[],n=(s("99af"),s("1100")),o={components:{errorPage:n["a"]},props:{postUrl:{type:null,required:!0},dataName:{type:null,required:!0},reqData:{type:null,required:!0},apptypeShow:{type:Boolean,default:!0}},data:function(){return{list:[],pageStyles:0,loading:!1,finished:!1,isLoading:!1,query:"",pagesize:10,xxList:[],currentpage:1,totalpageno:0,finishedText:"没有更多了",errorText:"请求失败，点击重新加载",total:0}},created:function(){this.reqNewData=this.reqData,console.info("reqData-----------------",this.reqData);var t=this;this.$bus.$on("refList",(function(i){var s=this;t.query=i,t.currentpage=1,t.getListData(i).then((function(t){s.loading=!1,s.totalpageno<=s.currentpage&&(s.finished=!0)}))}))},beforeDestroy:function(){this.$bus.$off("refList")},methods:{getListData:function(){var t=this,i=this.reqData;console.info("query--11--",this.query);var s={};if(this.apptypeShow){if(null!=this.query&&""!==this.query){var e={apptype:"APP"};this.query=Object.assign(this.query,e)}else this.query={apptype:"APP"};s={pageno:this.currentpage,query:JSON.stringify(this.query)}}else null!=this.query&&""!==this.query?(this.query=Object.assign(this.query),s={pageno:this.currentpage,query:JSON.stringify(this.query)}):s={pageno:this.currentpage};return console.info("form111-----------------",i),this.$store.dispatch(this.postUrl,Object.assign(i,s)).then((function(i){t.totalpageno=i.totalpageno?i.totalpageno:i.totalPages,t.pageStyles=0,0===t.totalpageno&&(t.pageStyles=1),1===t.currentpage?(t.list=t.dataName?i[t.dataName]:i,null!=t.list&&0!==t.list.length||(t.pageStyles=1)):0===i.length?t.finished=!0:t.totalpageno>=t.currentpage?t.list=t.list.concat(t.dataName?i[t.dataName]:i):t.finished=!0,console.log("this.list===============================",t.list),i&&i.title?(t.xxList.data=t.list,t.xxList.title=i.title,t.$emit("returnData",t.xxList)):t.$emit("returnData",t.list)})).catch((function(i){t.pageStyles=3,t.loading=!1,t.errorText=i}))},parentReceive:function(){this.onRefresh(this.query)},onLoad:function(){var t=this;this.getListData().then((function(i){t.loading=!1,t.currentpage++,t.totalpageno<t.currentpage&&(t.finished=!0)}))},onRefresh:function(t){var i=this;this.query=null!=t&&""!==t?t:{},this.list=[],this.currentpage=1,this.getListData(1).then((function(){i.isLoading=!1,i.finished=!1}))},hideLoading:function(){this.loading=!1},hideIsLoading:function(){this.isLoading=!1}}},r=o,l=s("2877"),c=Object(l["a"])(r,e,a,!1,null,null,null);i["a"]=c.exports},"8a81":function(t,i,s){},cf8d:function(t,i,s){"use strict";var e=s("8a81"),a=s.n(e);a.a},e070:function(t,i,s){var e=s("d039"),a=s("5899"),n="​᠎";t.exports=function(t){return e((function(){return!!a[t]()||n[t]()!=n||a[t].name!==t}))}}}]);
//# sourceMappingURL=DbsxSubmit.d255050c.js.map