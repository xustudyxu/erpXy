(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ShglAddSp"],{1100:function(t,s,i){"use strict";var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"error-main"},[0!=t.pageStyle?i("div",{staticClass:"status"},[i("div",{class:t.getCss()}),i("h3",[t._v(t._s(t.getTitle()))]),i("van-button",{directives:[{name:"show",rawName:"v-show",value:t.showButton,expression:"showButton"}],attrs:{type:"info"},on:{click:t.errorButton}},[t._v(t._s(t.getButton()))])],1):t._e()])},a=[],n={name:"Error",props:{pageStyle:{type:null,required:!0},showButton:{default:!0,type:Boolean}},data:function(){return{}},watch:{pageTitle:function(t){}},created:function(){},methods:{errorButton:function(){-1==this.pageStyle?this.$router.push("/login"):this.$emit("errorButton")},getTitle:function(){return-1==this.pageStyle?"未登录，请先登录":0==this.pageStyle?"正常状态不显示":1==this.pageStyle?"暂无数据":2==this.pageStyle?"无网络，请检查当前网络":3==this.pageStyle?"网络请求失败，请再次尝试":4==this.pageStyle?this.pageTitle:void 0},getCss:function(){return-1==this.pageStyle?"status-icon no-result":0==this.pageStyle?"status-icon no-network":1==this.pageStyle?"status-icon no-result":2==this.pageStyle?"status-icon no-network":3==this.pageStyle?"status-icon no-network":4==this.pageStyle?"status-icon no-xiangmu":void 0},getButton:function(){return-1==this.pageStyle?"登录":"再试一次"}}},h=n,x=i("2877"),c=Object(x["a"])(h,e,a,!1,null,"409e994e",null);s["a"]=c.exports},1509:function(t,s,i){"use strict";i.r(s);var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",[i("headerBar",{attrs:{"header-data":t.headerData},on:{searchClick:function(s){return t.searchAction()}}}),i("div",{staticClass:"container"},[i("common-list",{ref:"dida_list",staticClass:"common-list common-list-spe",attrs:{"post-url":t.list.postUrl,"req-data":t.list.reqData,"data-name":t.list.dataName,"apptype-show":!1},on:{returnData:function(s){return t.getPrizeLog(s)}}},[i("div",{staticClass:"common-main box"},t._l(t.spxxList,(function(s,e){return i("div",{key:e,staticClass:"general-list"},[i("div",{staticClass:"general-check"},[i("van-checkbox",{on:{click:function(i){return t.checkMx(s,e)}},model:{value:s.state,callback:function(i){t.$set(s,"state",i)},expression:"items.state"}})],1),i("div",{staticClass:"general-item",on:{click:function(s){return t.showSpxzPopup(e)}}},[i("div",{staticClass:"general-tit"},[t._v(t._s(s.htmc))]),i("div",{staticClass:"general-info"},[i("span",[i("em",[t._v("订单编号：")]),t._v(t._s(s.htbh))])]),i("div",{staticClass:"general-info"},[i("span",[i("em",[t._v("乙方名称：")]),t._v(t._s(s.gysmc))])]),i("div",{staticClass:"general-info"},[i("span",[i("em",[t._v("订单金额：")]),t._v(t._s(s.htje+"(元)"))])])]),i("div",{staticClass:"general-arrow"},[i("i",{staticClass:"iconfont iconarrowright"})])])})),0)])],1),i("div",{staticClass:"common-space"}),i("div",{staticClass:"foot-btn fixed"},[i("ul",[i("li",[i("van-button",{attrs:{type:"info",round:"",size:"large"},on:{click:function(s){return t.save()}}},[t._v("保存")])],1)])]),i("van-popup",{style:{height:"90%",background:"#f9f9f9"},attrs:{"get-container":t.getContainer,closeable:"",position:"bottom","close-icon-position":"top-left"},on:{click:function(s){t.showSearch=!1},close:t.close},model:{value:t.SpxzShow,callback:function(s){t.SpxzShow=s},expression:"SpxzShow"}},[i("div",{staticClass:"popup-title"},[t._v("选择商品")]),t.spxxList&&t.spxxList[t.mxIndex]?i("div",{staticClass:"popup-content"},t._l(t.spxxList[t.mxIndex].mxList,(function(s,e){return i("div",{key:e,staticClass:"common-main box"},[i("div",{staticClass:"title-check"},[i("div",{staticClass:"check"},[i("van-checkbox",{on:{click:function(i){return t.checkSp(s,e)}},model:{value:s.state,callback:function(i){t.$set(s,"state",i)},expression:"item.state"}})],1),i("div",{staticClass:"check-info"},[t._v(t._s(s.spmc))])]),i("div",{staticClass:"page-list"},[i("div",{staticClass:"pagelist-left"},[t._v("订单数量")]),i("div",{staticClass:"pagelist-right"},[t._v(t._s(s.sl))])]),i("div",{staticClass:"page-list"},[i("div",{staticClass:"pagelist-left"},[t._v("待交货数量")]),i("div",{staticClass:"pagelist-right"},[t._v(t._s(s.djhsl))])]),i("van-field",{attrs:{label:"本次送货数量","input-align":"right","label-width":"100",type:"number",placeholder:"请输入数量"},model:{value:s.bcsl,callback:function(i){t.$set(s,"bcsl",i)},expression:"item.bcsl"}}),i("div",{staticClass:"page-list"},[i("div",{staticClass:"pagelist-left"},[t._v("单价（含税）元")]),i("div",{staticClass:"pagelist-right"},[t._v(t._s(s.dj))])]),i("div",{staticClass:"page-list"},[i("div",{staticClass:"pagelist-left"},[t._v("计量单位")]),i("div",{staticClass:"pagelist-right"},[t._v(t._s(s.jldw))])])],1)})),0):t._e(),i("div",{staticClass:"common-space"}),i("div",{staticClass:"foot-btn fixed"},[i("ul",[i("li",{staticClass:"check"},[i("van-checkbox",{on:{click:t.checkAll},model:{value:t.checked,callback:function(s){t.checked=s},expression:"checked"}}),t._v(" 全选 ")],1),i("li",[i("van-button",{attrs:{type:"info",round:"",size:"large"},on:{click:function(s){return t.checkFinish()}}},[t._v("完成（"+t._s(t.checkedMxList.length)+"）")])],1)])])]),i("searchMeun",{on:{goSearchAction:function(s){return t.search(s)},reSet:t.goReset}},[i("van-field",{attrs:{label:"订单名称",placeholder:"请输入订单名称","input-align":"right"},model:{value:t.ddmc,callback:function(s){t.ddmc=s},expression:"ddmc"}}),i("van-field",{attrs:{label:"订单编号",placeholder:"请输入订单编号","input-align":"right"},model:{value:t.ddbh,callback:function(s){t.ddbh=s},expression:"ddbh"}})],1)],1)},a=[],n=(i("c975"),i("a434"),i("b0c0"),i("a9e3"),i("25eb"),i("6595")),h=i("c46f"),x=i("445c"),c={components:{commonList:n["a"],searchMeun:h["a"],headerBar:x["a"]},data:function(){return{headerData:{title:"选择商品",leftUrl:"back",leftText:" ",showSearch:!0},show:!1,pageno:1,list:{items:[],error:!1,postUrl:"",reqData:"",dataName:"",noDataText:""},ddmc:"",ddbh:"",id:"",fhmxList:[],checkedMxList:[],mxIndex:0,mxList:[],spxxList:[],gysList:[],fhbh:"",canChange:!0,pageName:"",fileChangeInfo:{},filegroup:"",fhsj:"",yjdhsj:"",YjdhsjShow:!1,date1:"",date:"",wllxShow:"",wllx:"",bcshsl:"",checked:"",fhdbh:"",active:"",fhdmc:"",wlgsmc:"",ydh:"",fhdd:"",wllxr:"",wllxfs:"",xmmcvalue:"",xmbhvalue:"",FhsjShow:!1,showDelete:!1,SpxzShow:!1,showSearch:!1,result:[],result2:[],fileList:[{url:"https://img.yzcdn.cn/vant/leaf.jpg"}],searchPick:{PickTitle:"请选择物流类型",PickColumns:[]},activeNames:["1"]}},computed:{},created:function(){this.fhmxList=this.$route.params.fhmxList,this.init()},methods:{goReset:function(){this.ddmc="",this.ddbh=""},getPrizeLog:function(t){this.spxxList=[];for(var s=0;s<t.length;s++){for(var i={state:!1},e=0;e<t[s].length;e++){var a=t[s][e],n=a.name,h=a.value;if(i[n]=h,a.mxList){for(var x=[],c=0;c<a.mxList.length;c++){for(var r=a.mxList[c],o={state:!1},l=0;l<r.length;l++){var d=r[l],p=d.name,u=d.value;o[p]=u}x.push(o)}i["mxList"]=x}}this.spxxList.push(i)}},search:function(){this.$bus.$emit("showMeun",!1);var t={ddmc:this.ddmc,ddbh:this.ddbh};this.$refs.dida_list.onRefresh(t),this.show=!1},init:function(){this.list.postUrl="fhgl/getXm_fhdhmxSelectAction",this.list.reqData={zzid:this.$store.state.mh.mhUserInfo.zzid,pageno:this.pageno},this.list.dataName="list"},save:function(){for(var t=this.spxxList.length-1;t>=0;t--)if(!1===this.spxxList[t].state)this.spxxList.splice(t,1);else for(var s=this.spxxList[t].mxList.length-1;s>=0;s--)!1===this.spxxList[t].mxList[s].state&&this.spxxList[t].mxList.splice(s,1);this.saveXm_fhmxList()},saveXm_fhmxList:function(){for(var t=this,s=[],i=0;i<this.spxxList.length;i++)for(var e=0;e<this.spxxList[i].mxList.length;e++){var a={};a.id=this.spxxList[i].mxList[e].id,a.spmc=this.spxxList[i].mxList[e].spmc,a.htid=this.spxxList[i].mxList[e].htid,a.bcsl=this.spxxList[i].mxList[e].bcsl,a.sqdmxid=this.spxxList[i].mxList[e].sqdmxid,s.push(a)}this.$store.dispatch("fhgl/saveXm_fhmxListAction",{fhbh:this.$store.state.fhgl.fhbh,xm_fhmxList:s}).then((function(s){t.$toast("保存成功！"),t.$store.commit("fhgl/SET_ACTIVE",1),t.$router.back()}))},checkMx:function(t,s){for(var i=0;i<this.spxxList.length;i++)for(var e=0;e<this.spxxList[i].mxList.length;e++){var a=this.spxxList[i].mxList[e];if(a.bcsl<0)return this.$toast("本次送货数量应大于0！"),this.spxxList[s].state=!this.spxxList[s].state,void this.spxxList.splice(s,1,this.spxxList[s]);if(a.bcsl>Number.parseInt(a.djhsl))return this.$toast("本次送货数量不能大于待交货数量！"),this.spxxList[s].state=!this.spxxList[s].state,void this.spxxList.splice(s,1,this.spxxList[s])}if(this.mxIndex=s,t.state)for(var n=0;n<this.spxxList[s].mxList.length;n++)this.spxxList[s].mxList[n].bcsl&&this.spxxList[s].mxList[n].bcsl>0?this.spxxList[s].mxList[n].state=!0:(this.spxxList[s].mxList[n].bcsl=this.spxxList[s].mxList[n].djhsl,this.spxxList[s].mxList[n].state=!0);else for(var h=0;h<this.spxxList[s].mxList.length;h++)this.spxxList[s].mxList[h].state=!1},close:function(){this.checkedMxList.length>0?(this.spxxList[this.mxIndex].state=!0,this.spxxList.splice(this.mxIndex,1,this.spxxList[this.mxIndex])):(this.spxxList[this.mxIndex].state=!1,this.spxxList.splice(this.mxIndex,1,this.spxxList[this.mxIndex]))},showSpxzPopup:function(t){this.mxIndex=t,this.checkedMxList=[];for(var s=0;s<this.spxxList[t].mxList.length;s++){var i=this.spxxList[t].mxList[s];i.state&&this.checkedMxList.push(this.spxxList[t].mxList[s])}this.checkedMxList.length===this.spxxList[t].mxList.length?this.checked=!0:this.checked=!1,this.SpxzShow=!0},showPopup:function(){this.show=!0},checkFinish:function(){for(var t=0;t<this.spxxList[this.mxIndex].mxList.length;t++){var s=this.spxxList[this.mxIndex].mxList[t];if(s.state&&s.bcsl<=0)return void this.$toast("本次送货数量应大于0！");if(s.state&&s.bcsl>Number.parseInt(s.djhsl))return void this.$toast("本次送货数量不能大于待交货数量！")}this.checkedMxList.length>0?(this.spxxList[this.mxIndex].state=!0,this.spxxList.splice(this.mxIndex,1,this.spxxList[this.mxIndex])):(this.spxxList[this.mxIndex].state=!1,this.spxxList.splice(this.mxIndex,1,this.spxxList[this.mxIndex])),this.SpxzShow=!1},checkSp:function(t,s){if((""===t.bcsl||t.bcsl<=0)&&(this.spxxList[this.mxIndex].mxList[s].bcsl=this.spxxList[this.mxIndex].mxList[s].djhsl,this.spxxList[this.mxIndex].mxList.splice(s,1,this.spxxList[this.mxIndex].mxList[s])),t.bcsl>Number.parseInt(t.djhsl))return this.$toast("本次送货数量不能大于待交货数量！"),this.spxxList[this.mxIndex].mxList[s].state=!this.spxxList[this.mxIndex].mxList[s].state,void this.spxxList[this.mxIndex].mxList.splice(s,1,this.spxxList[this.mxIndex].mxList[s]);t.state?this.checkedMxList.push(t):this.checkedMxList.splice(this.checkedMxList.indexOf(t),1),this.checkedMxList.length===this.spxxList[this.mxIndex].mxList.length?this.checked=!0:this.checked=!1},getContainer:function(){},goShglIndex:function(){this.$store.commit("fhgl/SET_ACTIVE",1),this.$router.back()},checkAll:function(){for(var t=0,s=0,i=0;i<this.spxxList[this.mxIndex].mxList.length;i++)this.spxxList[this.mxIndex].mxList[i].state?t++:s++;if(0===t){for(var e=!1,a=0;a<this.spxxList[this.mxIndex].mxList.length;a++)(!this.spxxList[this.mxIndex].mxList[a].bcsl||this.spxxList[this.mxIndex].mxList[a].bcsl<=0)&&(e=!0);if(e){for(var n=0;n<this.spxxList[this.mxIndex].mxList.length;n++)this.spxxList[this.mxIndex].mxList[n].bcsl=this.spxxList[this.mxIndex].mxList[n].djhsl;for(var h=0;h<this.spxxList[this.mxIndex].mxList.length;h++)this.spxxList[this.mxIndex].mxList[h].state=!0,this.spxxList[this.mxIndex].mxList.splice(h,1,this.spxxList[this.mxIndex].mxList[h]),this.spxxList.splice(this.mxIndex,1,this.spxxList[this.mxIndex]),this.checkedMxList.push(this.spxxList[this.mxIndex].mxList[h]);return}for(var x=0;x<this.spxxList.length;x++)for(var c=0;c<this.spxxList[x].mxList.length;c++){var r=this.spxxList[x].mxList[c];if(r.bcsl<0)return this.$toast("本次送货数量应大于0！"),void(this.checked=!this.checked);if(r.bcsl>Number.parseInt(r.djhsl))return this.$toast("本次送货数量不能大于待交货数量！"),void(this.checked=!this.checked)}for(var o=0;o<this.spxxList[this.mxIndex].mxList.length;o++)this.spxxList[this.mxIndex].mxList[o].state=!0,this.spxxList[this.mxIndex].mxList.splice(o,1,this.spxxList[this.mxIndex].mxList[o]),this.spxxList.splice(this.mxIndex,1,this.spxxList[this.mxIndex]),this.checkedMxList.push(this.spxxList[this.mxIndex].mxList[o])}if(0===s){for(var l=!1,d=0;d<this.spxxList[this.mxIndex].mxList.length;d++)this.spxxList[this.mxIndex].mxList[d].bcsl||(l=!0);if(l)return this.checked=!1,void this.$toast("请先选择本次发货数量！");for(var p=0;p<this.spxxList[this.mxIndex].mxList.length;p++)this.spxxList[this.mxIndex].mxList[p].state=!1,this.spxxList[this.mxIndex].mxList.splice(p,1,this.spxxList[this.mxIndex].mxList[p]),this.spxxList.splice(this.mxIndex,1,this.spxxList[this.mxIndex]),this.checkedMxList=[]}if(0!==t&&0!==s){for(var u=!1,m=0;m<this.spxxList[this.mxIndex].mxList.length;m++)this.spxxList[this.mxIndex].mxList[m].bcsl||(u=!0);if(u)return this.checked=!1,void this.$toast("请先选择本次发货数量！");for(var f=0;f<this.spxxList[this.mxIndex].mxList.length;f++)!1===this.spxxList[this.mxIndex].mxList[f].state&&this.checkedMxList.push(this.spxxList[this.mxIndex].mxList[f]),this.spxxList[this.mxIndex].mxList[f].state=!0,this.spxxList[this.mxIndex].mxList.splice(f,1,this.spxxList[this.mxIndex].mxList[f]),this.spxxList.splice(this.mxIndex,1,this.spxxList[this.mxIndex])}}}},r=c,o=(i("b39e"),i("2877")),l=Object(o["a"])(r,e,a,!1,null,"4d368db3",null);s["default"]=l.exports},"25eb":function(t,s,i){var e=i("23e7"),a=i("e583");e({target:"Number",stat:!0,forced:Number.parseInt!=a},{parseInt:a})},"3d39":function(t,s,i){},"445c":function(t,s,i){"use strict";var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("header",{staticClass:"nav-bar"},[t.headerData.leftText?i("div",{staticClass:"nav-bar-left"},[i("div",{on:{click:function(s){return s.stopPropagation(),t.handelClick(t.headerData.leftUrl)}}},[i("i",{staticClass:"iconfont iconicon-back"}),i("div",{staticClass:"nav-bar-txt"},[t._v(t._s(t.headerData.leftText))])])]):t._e(),i("div",{staticClass:"nav-bar-title"},[t._v(t._s(t.headerData.title))]),i("div",{staticClass:"nav-bar-right"},[t.headerData.rightText?i("div",{staticClass:"nav-bar-txt",on:{click:function(s){return t.handelClick(t.headerData.rightUrl,t.headerData.rightCallBackClick)}}},[t._v(t._s(t.headerData.rightText))]):t._e(),t.headerData.showSearch?i("i",{staticClass:"iconfont iconsousuo",on:{click:function(s){return t.searchClick()}}}):t._e()])])},a=[],n={name:"HeaderBar",props:{headerData:{type:null,required:!0}},data:function(){return{}},created:function(){this.headerData&&(this.headerData.rightCallBackClick||(this.headerData.rightCallBackClick=!1))},methods:{searchClick:function(){this.$bus.$emit("showMeun",!0)},handelClick:function(t,s){if(console.log("targetUrl=====================",t),"back"!==t)if("needConfirm"!==t){if(t)this.$router.push(t);else if(s){var i="callback";this.headerData&&this.headerData.rightText&&(i=this.headerData.rightText),this.$emit("callbackClick",i)}}else this.$emit("on-exit");else this.$router.go(-1)}}},h=n,x=i("2877"),c=Object(x["a"])(h,e,a,!1,null,"416ac0a2",null);s["a"]=c.exports},6595:function(t,s,i){"use strict";var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{attrs:{id:"didaList"}},[0==t.pageStyles?i("div",[i("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(s){t.isLoading=s},expression:"isLoading"}},[i("van-list",{attrs:{finished:t.finished,"finished-text":t.finishedText,"error-text":t.errorText},on:{load:t.onLoad},model:{value:t.loading,callback:function(s){t.loading=s},expression:"loading"}},[t._t("default")],2)],1)],1):i("div",[i("error-page",{attrs:{"page-style":t.pageStyles},on:{errorButton:t.parentReceive}})],1)])},a=[],n=(i("99af"),i("1100")),h={components:{errorPage:n["a"]},props:{postUrl:{type:null,required:!0},dataName:{type:null,required:!0},reqData:{type:null,required:!0},apptypeShow:{type:Boolean,default:!0}},data:function(){return{list:[],pageStyles:0,loading:!1,finished:!1,isLoading:!1,query:"",pagesize:10,xxList:[],currentpage:1,totalpageno:0,finishedText:"没有更多了",errorText:"请求失败，点击重新加载",total:0}},created:function(){this.reqNewData=this.reqData,console.info("reqData-----------------",this.reqData);var t=this;this.$bus.$on("refList",(function(s){var i=this;t.query=s,t.currentpage=1,t.getListData(s).then((function(t){i.loading=!1,i.totalpageno<=i.currentpage&&(i.finished=!0)}))}))},beforeDestroy:function(){this.$bus.$off("refList")},methods:{getListData:function(){var t=this,s=this.reqData;console.info("query--11--",this.query);var i={};if(this.apptypeShow){if(null!=this.query&&""!==this.query){var e={apptype:"APP"};this.query=Object.assign(this.query,e)}else this.query={apptype:"APP"};i={pageno:this.currentpage,query:JSON.stringify(this.query)}}else null!=this.query&&""!==this.query?(this.query=Object.assign(this.query),i={pageno:this.currentpage,query:JSON.stringify(this.query)}):i={pageno:this.currentpage};return console.info("form111-----------------",s),this.$store.dispatch(this.postUrl,Object.assign(s,i)).then((function(s){t.totalpageno=s.totalpageno?s.totalpageno:s.totalPages,t.pageStyles=0,0===t.totalpageno&&(t.pageStyles=1),1===t.currentpage?(t.list=t.dataName?s[t.dataName]:s,null!=t.list&&0!==t.list.length||(t.pageStyles=1)):0===s.length?t.finished=!0:t.totalpageno>=t.currentpage?t.list=t.list.concat(t.dataName?s[t.dataName]:s):t.finished=!0,console.log("this.list===============================",t.list),s&&s.title?(t.xxList.data=t.list,t.xxList.title=s.title,t.$emit("returnData",t.xxList)):t.$emit("returnData",t.list)})).catch((function(s){t.pageStyles=3,t.loading=!1,t.errorText=s}))},parentReceive:function(){this.onRefresh(this.query)},onLoad:function(){var t=this;this.getListData().then((function(s){t.loading=!1,t.currentpage++,t.totalpageno<t.currentpage&&(t.finished=!0)}))},onRefresh:function(t){var s=this;this.query=null!=t&&""!==t?t:{},this.list=[],this.currentpage=1,this.getListData(1).then((function(){s.isLoading=!1,s.finished=!1}))},hideLoading:function(){this.loading=!1},hideIsLoading:function(){this.isLoading=!1}}},x=h,c=i("2877"),r=Object(c["a"])(x,e,a,!1,null,null,null);s["a"]=r.exports},b39e:function(t,s,i){"use strict";var e=i("3d39"),a=i.n(e);a.a},c46f:function(t,s,i){"use strict";var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",[i("van-popup",{staticClass:"search-popup",attrs:{position:"top","overlay-class":"transparent-overlay"},model:{value:t.show,callback:function(s){t.show=s},expression:"show"}},[i("div",{staticClass:"common-main box"},[i("div",{staticClass:"spe-input"},[t._t("default")],2),i("div",{staticClass:"search-popup-btn"},[i("van-button",{attrs:{type:"info",block:"",plain:"",round:""},on:{click:function(s){return t.reSet()}}},[t._v("重置")]),i("van-button",{attrs:{type:"info",block:"",round:""},on:{click:function(s){return t.searchXmxx()}}},[t._v("搜索")])],1)])])],1)},a=[],n={components:{},props:{},data:function(){return{show:!1}},computed:{},created:function(){var t=this;this.$bus.$on("showMeun",(function(s){console.log("searchClick=====aaa======="),t.show=s}))},methods:{reSet:function(){this.$emit("reSet")},test:function(){this.show=!0,console.log("searchClick=====aabbba=======")},searchXmxx:function(){this.$emit("goSearchAction","search")}}},h=n,x=i("2877"),c=Object(x["a"])(h,e,a,!1,null,null,null);s["a"]=c.exports}}]);
//# sourceMappingURL=ShglAddSp.691e707a.js.map