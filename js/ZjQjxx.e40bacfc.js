(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ZjQjxx"],{"3b54":function(t,s,i){},"445c":function(t,s,i){"use strict";var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("header",{staticClass:"nav-bar"},[t.headerData.leftText?i("div",{staticClass:"nav-bar-left"},[i("div",{on:{click:function(s){return s.stopPropagation(),t.handelClick(t.headerData.leftUrl)}}},[i("i",{staticClass:"iconfont iconicon-back"}),i("div",{staticClass:"nav-bar-txt"},[t._v(t._s(t.headerData.leftText))])])]):t._e(),i("div",{staticClass:"nav-bar-title"},[t._v(t._s(t.headerData.title))]),i("div",{staticClass:"nav-bar-right"},[t.headerData.rightText?i("div",{staticClass:"nav-bar-txt",on:{click:function(s){return t.handelClick(t.headerData.rightUrl,t.headerData.rightCallBackClick)}}},[t._v(t._s(t.headerData.rightText))]):t._e(),t.headerData.showSearch?i("i",{staticClass:"iconfont iconsousuo",on:{click:function(s){return t.searchClick()}}}):t._e()])])},a=[],n={name:"HeaderBar",props:{headerData:{type:null,required:!0}},data:function(){return{}},created:function(){this.headerData&&(this.headerData.rightCallBackClick||(this.headerData.rightCallBackClick=!1))},methods:{searchClick:function(){this.$bus.$emit("showMeun",!0)},handelClick:function(t,s){if(console.log("targetUrl=====================",t),"back"!==t)if("needConfirm"!==t){if(t)this.$router.push(t);else if(s){var i="callback";this.headerData&&this.headerData.rightText&&(i=this.headerData.rightText),this.$emit("callbackClick",i)}}else this.$emit("on-exit");else this.$router.go(-1)}}},o=n,l=i("2877"),r=Object(l["a"])(o,e,a,!1,null,"416ac0a2",null);s["a"]=r.exports},"8bb4":function(t,s,i){"use strict";i.r(s);var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",[i("headerBar",{attrs:{"header-data":t.headerData}}),i("div",{class:t.showRemind?"container":"container-tab"},[i("div",{staticClass:"remind-holidays",class:t.showRemind?"hide":""},[t._m(0),t._m(1),i("div",{staticClass:"remind-close",on:{click:function(s){return t.showRemindBtn()}}},[i("i",{staticClass:"iconfont iconguanbi"})])]),i("div",{staticClass:"container-mini"},[i("div",{staticClass:"content"},[i("div",{staticClass:"common-main box"},[i("div",{staticClass:"holidays-flex"},[i("div",{staticClass:"tit"},[t._v(t._s((new Date).getFullYear())+"年剩余年假")]),i("div",{staticClass:"date"},[t._v(t._s(t.synj?t.synj:0)+"天")])])]),i("div",{staticClass:"common-main box"},[i("div",{staticClass:"holidays-flex"},[i("van-cell",{attrs:{title:"抄送人","is-link":""},on:{click:function(s){t.showXzRy=!0}},model:{value:t.yxry,callback:function(s){t.yxry=s},expression:"yxry"}})],1)])]),t._l(t.qjList,(function(s,e){return i("van-swipe-cell",{key:e,scopedSlots:t._u([{key:"right",fn:function(){return[i("div",{staticClass:"sideslip"},[i("div",{staticClass:"sideslip-item red"},[i("div",{staticClass:"icon",on:{click:function(s){return t.deleteQjxx(e)}}},[i("i",{staticClass:"iconfont iconshanchu1"})]),t._v(" 删除 ")])])]},proxy:!0}],null,!0)},[i("div",{staticClass:"content"},[i("div",{staticClass:"common-main box",on:{click:function(i){t.qjxx=s}}},[i("van-cell",{attrs:{title:"请假类型",value:s.qjlx,required:"","is-link":""},on:{click:function(i){return t.showQjlxPopup(s)}}}),"调休"===s.qjlx?i("van-field",{attrs:{rows:"1",autosize:"",label:"加班时间",required:"",type:"textarea","input-align":"right",placeholder:"请填写对应加班日期（上月或当月非工作日）"},model:{value:s.jbrq,callback:function(i){t.$set(s,"jbrq",i)},expression:"item.jbrq"}}):t._e(),"陪考假"===s.qjlx?i("van-cell",{attrs:{title:"考试类型",value:s.kslxShow,required:"","is-link":""},on:{click:function(i){return t.showKslxPopup(s)}}}):t._e(),i("van-cell",{attrs:{title:"开始日期",value:s.date,required:"","is-link":""},on:{click:function(i){return t.showKsrqPopup(s)}}}),i("van-cell",{attrs:{title:"开始时段",value:s.KssdShow,required:"","is-link":""},on:{click:function(i){return t.showKssdPopup(s)}}}),i("van-cell",{attrs:{title:"结束日期",value:s.date1,required:"","is-link":""},on:{click:function(i){return t.showJsrqPopup(s)}}}),i("van-cell",{attrs:{title:"结束时段",value:s.JssdShow,required:"","is-link":""},on:{click:function(i){return t.showJssdPopup(s)}}})],1)])])})),i("div",{staticClass:"content"},[i("div",{staticClass:"common-main box"},[i("van-field",{attrs:{rows:"1",autosize:"",label:"请假原因",required:"",type:"textarea","input-align":"right",placeholder:"请输入请假原因"},model:{value:t.qjyy,callback:function(s){t.qjyy=s},expression:"qjyy"}})],1)]),i("div",{staticClass:"foot-btn-white"},[i("van-button",{attrs:{type:"info",block:"",plain:"",size:"large"},on:{click:function(s){return t.addQjxx()}}},[i("i",{staticClass:"iconfont iconzengjia"}),t._v(" 增加")])],1)],2),i("van-calendar",{attrs:{"min-date":t.getMinDate(),"max-date":t.getMaxDate(),color:"#1890ff"},on:{confirm:t.onConfirm},model:{value:t.show,callback:function(s){t.show=s},expression:"show"}}),i("van-calendar",{attrs:{"min-date":t.getMinDate(),"max-date":t.getMaxDate1(),color:"#1890ff"},on:{confirm:t.onConfirm1},model:{value:t.show1,callback:function(s){t.show1=s},expression:"show1"}}),i("van-popup",{style:{height:"35%"},attrs:{position:"bottom",closeable:"",round:""},on:{close:function(s){return t.qjlxClose()}},model:{value:t.QjlxShow,callback:function(s){t.QjlxShow=s},expression:"QjlxShow"}},[i("div",{staticClass:"common-popup"},[i("div",{staticClass:"popup-title"},[t._v("选择请假类型")]),i("div",{staticClass:"popup-content"},[i("div",{staticClass:"select-list-flex"},[i("ul",t._l(t.qjlxList,(function(s,e){return i("li",{key:e,class:t.qjxx.qjlx===s?"active":"",on:{click:function(i){return t.qjlxClick(s)}}},[t._v(" "+t._s(s)+" ")])})),0)])]),i("div",{staticClass:"foot-btn fixed"},[i("ul",[i("li",[i("van-button",{attrs:{type:"info",round:"",size:"large"},on:{click:function(s){return t.xzqjlx()}}},[t._v("确定")])],1)])])])])],1),i("div",{staticClass:"common-space"}),i("div",{staticClass:"foot-btn fixed"},[i("ul",[i("li",[i("van-button",{attrs:{type:"info",round:"",size:"large"},on:{click:function(s){return t.submit(2)}}},[t._v(t._s("修改请假信息"===t.headerData.title?"修改":"提交"))])],1),"修改请假信息"===t.headerData.title?i("li",[i("van-button",{attrs:{type:"info",round:"",size:"large"},on:{click:function(s){return t.delet()}}},[t._v("删除")])],1):t._e()])]),i("van-popup",{attrs:{round:"",position:"bottom"},model:{value:t.KssdShow,callback:function(s){t.KssdShow=s},expression:"KssdShow"}},[i("van-picker",{attrs:{title:"开始时段","show-toolbar":"",columns:t.Kssdcolumns},on:{confirm:t.onKssdConfirm,cancel:function(s){t.KssdShow=!1}}})],1),i("van-popup",{attrs:{round:"",position:"bottom"},model:{value:t.JssdShow,callback:function(s){t.JssdShow=s},expression:"JssdShow"}},[i("van-picker",{attrs:{title:"开始时段","show-toolbar":"",columns:t.Kssdcolumns},on:{confirm:t.onJssdConfirm1,cancel:function(s){t.JssdShow=!1}}})],1),i("van-popup",{attrs:{round:"",position:"bottom"},model:{value:t.KslxShow,callback:function(s){t.KslxShow=s},expression:"KslxShow"}},[i("van-picker",{attrs:{title:"考试类型","show-toolbar":"",columns:t.Kslxcolumns},on:{confirm:t.onJslxConfirm,cancel:function(s){t.KslxShow=!1}}})],1),i("van-popup",{style:{height:"100%"},attrs:{closeable:"",position:"bottom"},model:{value:t.showXzRy,callback:function(s){t.showXzRy=s},expression:"showXzRy"}},[i("div",{staticClass:"content"},[i("div",{staticClass:"select-search",staticStyle:{"margin-top":"40px"}},[i("van-search",{attrs:{placeholder:"请输入搜索关键词"},model:{value:t.searchVal,callback:function(s){t.searchVal=s},expression:"searchVal"}}),i("van-button",{attrs:{plain:"",type:"info",size:"small"},on:{click:function(s){return t.searchRy()}}},[t._v("搜索")])],1),t._l(t.rylist,(function(s,e){return i("div",{key:e},[i("div",{staticClass:"select-renyuan",class:{active:s.isActive},on:{click:function(i){return t.selectRy(s)}}},[i("div",{staticClass:"renyuan-l"},[i("div",{staticClass:"icon"},[i("i",{staticClass:"iconfont iconxuanzhong"})])]),i("div",{staticClass:"renyuan-m"},[i("div",{staticClass:"name"},[t._v(t._s(s.rymc))])])])])}))],2),i("div",{staticClass:"common-space"}),i("div",{staticClass:"foot-btn fixed"},[i("ul",[i("li",[i("van-button",{attrs:{type:"info",round:"",size:"large"},on:{click:t.xzMutilActorsOnConfirm}},[t._v("确定")])],1)])])])],1)},a=[function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"remind-tit"},[i("i",{staticClass:"iconfont icontongzhi1"}),t._v(" 温馨提醒： ")])},function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"remind-content"},[t._v(" 1、婚假(5天)、产假(4个月)、陪产假(5天)、丧假(5天)为带薪假期，不视为请假，超过标准天数的按事假处理。"),i("br"),t._v(" 2、如果上午请假，下午正常上班，请在APP上申报下午的工作状态。 3、丧假： 员工及配偶父母、子女、配偶去世，可集中休一次5个工作日丧假。 ")])}],n=(i("99af"),i("fb6a"),i("a434"),i("b0c0"),i("445c")),o=i("2241"),l={name:"ZjQjxx",components:{headerBar:n["a"]},data:function(){return{JslxShow:!1,KslxShow:!1,searchVal:"",yxryids:"",yxry:"",yxryList:[],showXzRy:!1,qjyy:"",qjxx:{},qjList:[{id:"",qjlx:"请选择请假类型",date:"请选择开始日期",kslx:"",kslxShow:"请选择考试类型",date1:"请选择结束日期",KssdShow:"请选择开始时段",JssdShow:"请选择结束时段",qjksrq:"",qjjsrq:""}],qjlxList:[],synj:"",headerData:{title:"新增请假信息",leftUrl:"back",leftText:" "},Kssdcolumns:["上午","下午"],Kslxcolumns:["高考","中考"],kslxMap:{"高考":1,"中考":0},kslxMap1:{1:"高考",0:"中考"},show:!1,show1:!1,QjlxShow:!1,KssdShow:!1,JssdShow:!1,qjlxMap:{"事假":"BSJ","年假":"NJ","婚假":"HJ","产假":"CJ","陪产假":"PCJ","丧假":"SJ","调休":"TX","陪考假":"PKJ"},qjlxMap1:{BSJ:"事假",NJ:"年假",HJ:"婚假",CJ:"产假",PCJ:"陪产假",SJ:"丧假",TX:"调休",PKJ:"陪考假"},buttonState:!0,minDate:new Date((new Date).getFullYear()-1,0,1),maxDate:new Date((new Date).getFullYear()+10,0,1),minDate1:new Date,maxDate1:new Date((new Date).getFullYear()+10,0,1),showRemind:!1,rylist:[]}},created:function(){this.xb=this.$store.state.mh.mhUserInfo.xb,this.qjlxList=1===this.xb?["年假","事假","婚假","陪产假","丧假","调休","陪考假"]:["年假","事假","婚假","产假","丧假","调休","陪考假"],this.$route.params.qjxx?(this.headerData.title=this.$route.params.title,this.id=this.$route.params.qjxx.id,this.getQjxx()):(this.qjList[0].KssdShow="上午",this.qjList[0].JssdShow="下午",this.qjList[0].qjkssjd=1,this.qjList[0].qjjssjd=2),this.getSynj(),this.getRYxx()},methods:{searchRy:function(){this.getRYxx()},selectRy:function(t){if(t.isActive=!t.isActive,t.isActive)this.yxryList.push(t);else for(var s=0;s<this.yxryList.length;s++)this.yxryList[s].ryid===t.ryid&&this.yxryList.splice(s,1)},xzMutilActorsOnConfirm:function(){this.yxry="",this.yxryids="";for(var t=0;t<this.yxryList.length;t++)t===this.yxryList.length-1?(this.yxry+=this.yxryList[t].rymc,this.yxryids+=this.yxryList[t].ryid):(this.yxry+=this.yxryList[t].rymc+";",this.yxryids+=this.yxryList[t].ryid+";");this.showXzRy=!1},getRYxx:function(){var t=this;this.$store.dispatch("erp/getRYxxAction",{rymc:this.searchVal}).then((function(s){t.rylist=s.data;for(var i=0;i<t.rylist.length;i++)t.$set(t.rylist[i],"isActive",!1);console.log("this.rylist================",t.rylist)}))},xzqjlx:function(){var t=this;this.QjlxShow=!1,"丧假"===this.qjxx.qjlx&&o["a"].confirm({title:"提示",message:"丧假： 员工及配偶父母、子女、配偶去世，可集中休一次5个工作日丧假。"}).then((function(){})).catch((function(){t.qjxx.qjlx="请选择请假类型"})),"产假"===this.qjxx.qjlx&&o["a"].confirm({title:"提示",message:"本人已知悉并接受公司关于产假期与产假期待遇的相关规定。"}).then((function(){})).catch((function(){t.qjxx.qjlx="请选择请假类型"}))},delet:function(){var t=this;this.$store.dispatch("erp/deleteQjxxAction",{id:this.id}).then((function(s){t.$toast("删除成功！"),t.$router.back()})).catch((function(s){return[t.$toast(s)]}))},qjlxClose:function(){"婚假"!==this.qjxx.qjlx&&"陪产假"!==this.qjxx.qjlx&&"丧假"!==this.qjxx.qjlx&&"产假"!==this.qjxx.qjlx||this.qjxx.qjksrq&&this.qjxx.qjkssjd&&this.getJssj()},getQjxx:function(){var t=this;this.$store.dispatch("erp/getQjxxByIdAction",{id:this.id}).then((function(s){if(s.qjmxes){t.qjList=[];for(var i=0;i<s.qjmxes.length;i++)s.qjmxes[i].date=t.formatDate2(s.qjmxes[i].qjksrq),s.qjmxes[i].date1=t.formatDate2(s.qjmxes[i].qjjsrq),s.qjmxes[i].KssdShow=1===s.qjmxes[i].qjkssjd?"上午":"下午",s.qjmxes[i].JssdShow=1===s.qjmxes[i].qjjssjd?"上午":"下午",s.qjmxes[i].qjlx=t.qjlxMap1[s.qjmxes[i].qjlx],s.qjmxes[i].kslxShow=t.kslxMap1[s.qjmxes[i].kslx],s.qjmxes[i].kslx=s.qjmxes[i].kslx;t.qjList=s.qjmxes}t.qjyy=s.qjyy})).catch((function(t){console.log(t)}))},submit:function(t){var s=this;if(this.buttonState)if(""!==this.qjyy){for(var i=[],e=0;e<this.qjList.length;e++){if("请选择请假类型"===this.qjList[e].qjlx||"请选择开始日期"===this.qjList[e].date||"请选择开始日期"===this.qjList[e].date1||"请选择开始时段"===this.qjList[e].KssdShow||"请选择结束时段"===this.qjList[e].JssdShow||"调休"===this.qjList[e].qjlx&&!this.qjList[e].jbrq)return void this.$toast("请填写请假信息！");if(this.qjList[e].qjksrq>this.qjList[e].qjjsrq)return void this.$toast("开始时间不能大于结束时间！");i.push({id:this.qjList[e].id,qjlx:this.qjlxMap[this.qjList[e].qjlx],jbrq:this.qjList[e].jbrq,kslx:this.qjList[e].kslx,qjksrq:this.qjList[e].qjksrq,qjjsrq:this.qjList[e].qjjsrq,qjkssjd:this.qjList[e].qjkssjd,qjjssjd:this.qjList[e].qjjssjd})}this.buttonState=!1,console.log("参数=======",{id:this.id,sqrbh:this.$store.state.mh.mhUserInfo.id,sqrmc:this.$store.state.mh.mhUserInfo.name,qjyy:this.qjyy,qjmxes:i,type:t,xmfzr:this.yxryids,xmfzrmc:this.yxry}),this.$store.dispatch("erp/saveQjxxAction",{id:this.id,sqrbh:this.$store.state.mh.mhUserInfo.id,sqrmc:this.$store.state.mh.mhUserInfo.name,qjyy:this.qjyy,qjmxes:i,type:t,xmfzr:this.yxryids,xmfzrmc:this.yxry}).then((function(i){1===t?s.$toast("保存成功！"):s.$toast("提交成功！"),s.buttonState=!0,s.$router.back()})).catch((function(t){s.$toast(t),s.buttonState=!0,console.log(t)}))}else this.$toast("请填写请假原因！")},deleteQjxx:function(t){this.qjList.splice(t,1)},addQjxx:function(){this.qjList.push({id:"",qjyy:"",qjlx:"请选择请假类型",date:"请选择开始日期",date1:"请选择开始日期",KssdShow:"上午",JssdShow:"下午",qjksrq:"",qjkssjd:1,qjjssjd:2,qjjsrq:""})},qjlxClick:function(t){"年假"===t&&this.synj<=0?this.$toast("已无剩余年假！"):this.qjxx.qjlx=t},getSynj:function(){var t=this;this.$store.dispatch("erp/getSynjAction",{ygbh:this.$store.state.mh.mhUserInfo.id,nf:""}).then((function(s){t.synj=s})).catch((function(t){console.log(t)}))},formatDate:function(t){var s="",i="";return s=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,i=t.getDate()<10?"0"+t.getDate():t.getDate(),"".concat(t.getFullYear(),"/").concat(s,"/").concat(i)},formatDate1:function(t){var s=t.getFullYear(),i="",e="";return i=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,e=t.getDate()<10?"0"+t.getDate():t.getDate(),s+""+i+e},formatDate2:function(t){return t+="",t.slice(0,4)+"/"+t.slice(4,6)+"/"+t.slice(6,8)},onKssdConfirm:function(t){this.KssdShow=!1,this.qjxx.KssdShow=t,this.qjxx.qjkssjd="上午"===t?1:2,"婚假"!==this.qjxx.qjlx&&"陪产假"!==this.qjxx.qjlx&&"丧假"!==this.qjxx.qjlx&&"产假"!==this.qjxx.qjlx||this.qjxx.qjksrq&&this.getJssj()},onJssdConfirm1:function(t){this.JssdShow=!1,this.qjxx.JssdShow=t,this.qjxx.qjjssjd="上午"===t?1:2},onJslxConfirm:function(t){this.KslxShow=!1,this.qjxx.kslxShow=t,this.qjxx.kslx=this.kslxMap[t],this.qjxx.qjksrq="",this.qjxx.qjjsrq="",this.qjxx.date="请选择开始日期",this.qjxx.date1="请选择结束日期",console.log("11=======",this.qjxx)},getMinDate:function(){return 1===this.qjxx.kslx?new Date((new Date).getFullYear(),5,6):this.minDate},getMaxDate1:function(){return 1===this.qjxx.kslx&&this.qjxx.date&&"请选择开始日期"!==this.qjxx.date?new Date(this.qjxx.date).getDate()+2>8?new Date((new Date).getFullYear(),5,8):new Date((new Date).getFullYear(),5,new Date(this.qjxx.date).getDate()+1):0===this.qjxx.kslx&&this.qjxx.qjksrq?new Date(new Date(this.qjxx.date).getFullYear(),new Date(this.qjxx.date).getMonth(),new Date(this.qjxx.date).getDate()+1):new Date((new Date).getFullYear()+10,(new Date).getMonth(),(new Date).getDate())},getMaxDate:function(){return 1===this.qjxx.kslx?new Date((new Date).getFullYear(),5,8):new Date((new Date).getFullYear()+10,(new Date).getMonth(),(new Date).getDate())},showQjlxPopup:function(t){this.qjxx=t,this.synj&&this.synj>0?this.qjxx.qjlx="年假":this.qjxx.qjlx="事假",this.QjlxShow=!0},showKsrqPopup:function(t){this.qjxx=t,this.show=!0},showKslxPopup:function(t){this.qjxx=t,this.KslxShow=!0},showKssdPopup:function(t){this.qjxx=t,this.KssdShow=!0},showJsrqPopup:function(t){"婚假"!==t.qjlx&&"产假"!==t.qjlx&&"陪产假"!==t.qjlx&&"丧假"!==t.qjlx&&(this.qjxx=t,this.show1=!0)},showJssdPopup:function(t){"婚假"!==t.qjlx&&"产假"!==t.qjlx&&"陪产假"!==t.qjlx&&"丧假"!==t.qjlx&&(this.qjxx=t,this.JssdShow=!0)},onConfirm:function(t){this.qjxx.qjksrq=this.formatDate1(t),this.qjxx.date=this.formatDate(t),"婚假"!==this.qjxx.qjlx&&"陪产假"!==this.qjxx.qjlx&&"丧假"!==this.qjxx.qjlx&&"产假"!==this.qjxx.qjlx||this.qjxx.qjkssjd&&this.getJssj(),this.show=!1},getJssj:function(){var t=this;this.$store.dispatch("erp/getQjjsrqAction",{qjlx:this.qjlxMap[this.qjxx.qjlx],qjksrq:this.qjxx.qjksrq,qjkssjd:this.qjxx.qjkssjd}).then((function(s){s&&(s.jqjzrq&&(t.qjxx.qjjsrq=s.jqjzrq,t.qjxx.date1=t.formatDate2(s.jqjzrq)),s.jqjzsjd&&(t.qjxx.JssdShow=1===s.jqjzsjd?"上午":"下午",t.qjxx.qjjssjd=s.jqjzsjd))}))},onConfirm1:function(t){this.qjxx.qjjsrq=this.formatDate1(t),this.qjxx.date1=this.formatDate(t),this.show1=!1},showRemindBtn:function(){this.showRemind=!this.showRemind}}},r=l,c=(i("c93f"),i("2877")),h=Object(c["a"])(r,e,a,!1,null,"6c93e5c5",null);s["default"]=h.exports},c93f:function(t,s,i){"use strict";var e=i("3b54"),a=i.n(e);a.a}}]);
//# sourceMappingURL=ZjQjxx.e40bacfc.js.map