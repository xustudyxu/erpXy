{"version":3,"sources":["webpack:///./src/page/zj/ZjSxqm.vue?21b3","webpack:///./src/assets/images/zj/icon-qm.png","webpack:///./src/page/zj/ZjSxqm.vue?401f","webpack:///src/page/zj/ZjSxqm.vue","webpack:///./src/page/zj/ZjSxqm.vue?ce33","webpack:///./src/page/zj/ZjSxqm.vue"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","headerData","_m","on","$event","goScan","actionCode","goFace","idCard","_e","staticStyle","faceImage","_v","goSing","handImage","hidden","style","height","model","value","callback","$$v","showqm","expression","ref","touchStart","touchMove","touchEnd","mouseDown","mouseMove","mouseUp","back","overwrite","commit","staticRenderFns","name","components","headerBar","mixins","data","stageInfo","client","points","canvasTxt","startX","startY","moveY","moveX","endY","endX","w","h","isDown","isViewAutograph","$route","query","isViews","contractSuccess","width","file1","file2","token","zjmessage","baseurl","isScan","title","leftUrl","leftText","watch","Native_ScanData","console","info","val","getScanData","Native_PhoneImageData","images","getFaceData","getSingImage","mounted","canvas","window","innerHeight","innerWidth","getContext","lineWidth","lineCap","LineJoin","getBoundingClientRect","created","methods","ev","event","preventDefault","touches","length","x","targetTouches","clienX","y","clientY","obj","beginPath","moveTo","lineTo","stroke","closePath","push","clientX","left","top","offsetX","offsetY","clearRect","$refs","canvasF","rotateBase64Img","toDataURL","imgW","imgH","size","canvas1","document","createElement","ctx","edg","error","image","Image","crossOrigin","src","onload","quadrant","cutCoor","sx","sy","ex","ey","translate","rotate","Math","PI","drawImage","imgData","getImageData","putImageData","that","imgUrl","$store","state","qmUrl","showQmPopup","goHome","$router","dataURLtoFile","arr","dataurl","split","mime","match","bstr","atob","n","u8arr","Uint8Array","charCodeAt","File","filename","goBackPage","goBack","myapp","backRoute","log","err","webkit","messageHandlers","postMessage","NativeScan","dispatch","then","res","JSON","parse","method","NativePhone","$toast","param","append","idcard","is_phone","u","navigator","userAgent","isAndroid","indexOf","isIOS","test","qmurl","component"],"mappings":"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","file":"js/ZjSxqm.7ce462b0.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ZjSxqm.vue?vue&type=style&index=0&id=403b0040&lang=css&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ZjSxqm.vue?vue&type=style&index=0&id=403b0040&lang=css&scoped=true&\"","module.exports = \"data:image/png;base64,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\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"renzheng\"},[_c('headerBar',{attrs:{\"header-data\":_vm.headerData}}),_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"common-main box\"},[_vm._m(0),_c('div',{staticClass:\"cert-content\",on:{\"click\":function($event){return _vm.goScan()}}},[_vm._m(1)])])]),(_vm.actionCode == '1')?_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"common-main box\"},[_vm._m(2),_c('div',{staticClass:\"cert-content\",on:{\"click\":function($event){return _vm.goFace()}}},[(!_vm.idCard)?_c('div',{staticClass:\"cert-icon\"},[_c('img',{attrs:{\"src\":require(\"@/assets/images/zj/icon-rlsb.png\")}})]):_vm._e(),_c('div',{staticClass:\"cert-result\"},[(_vm.idCard)?_c('div',{staticClass:\"result-icon\"},[_c('img',{staticStyle:{\"width\":\"200px\",\"height\":\"300px\"},attrs:{\"src\":_vm.faceImage}})]):_vm._e(),(_vm.idCard)?_c('div',{staticClass:\"result-text\"},[_c('img',{attrs:{\"src\":require(\"@/assets/images/zj/icon-rzcg.png\")}}),_vm._v(\"脸部识别成功\")]):_vm._e()])])])]):_vm._e(),_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"common-main box\"},[_c('div',{staticClass:\"title\"},[(_vm.actionCode == '1')?_c('div',{staticClass:\"title-left\"},[_c('h2',[_vm._v(\"3、请签名\")])]):_c('div',{staticClass:\"title-left\"},[_c('h2',[_vm._v(\"2、请签名\")])])]),_c('div',{staticClass:\"cert-content\",attrs:{\"id\":\"btn\"},on:{\"click\":function($event){return _vm.goSing()}}},[_c('div',{staticClass:\"cert-icon\"},[_c('img',{attrs:{\"src\":_vm.handImage}})])])])])]),_c('div',{attrs:{\"hidden\":_vm.hidden}},[_c('van-popup',{style:({ height: '100%' }),attrs:{\"position\":\"bottom\",\"closeable\":\"\",\"round\":\"\"},model:{value:(_vm.showqm),callback:function ($$v) {_vm.showqm=$$v},expression:\"showqm\"}},[_c('div',{staticClass:\"container-mini\"},[_c('div',{staticClass:\"canvas-content\"},[_c('canvas',{ref:\"canvasF\",on:{\"touchstart\":_vm.touchStart,\"touchmove\":_vm.touchMove,\"touchend\":_vm.touchEnd,\"mousedown\":_vm.mouseDown,\"mousemove\":_vm.mouseMove,\"mouseup\":_vm.mouseUp}})]),_c('div',{staticClass:\"foot-btn fixed sideleft\"},[_c('ul',[_c('li',[_c('van-button',{attrs:{\"type\":\"info\",\"size\":\"large\",\"plain\":\"\",\"round\":\"\"},on:{\"click\":_vm.back}},[_vm._v(\"返回\")])],1),_c('li',[_c('van-button',{attrs:{\"id\":\"reset\",\"type\":\"info\",\"size\":\"large\",\"plain\":\"\",\"round\":\"\"},on:{\"click\":_vm.overwrite}},[_vm._v(\"清除\")])],1),_c('li',[_c('van-button',{attrs:{\"id\":\"get\",\"type\":\"info\",\"size\":\"large\",\"round\":\"\"},on:{\"click\":_vm.commit}},[_vm._v(\"确定\")])],1)])])])])],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"title\"},[_c('div',{staticClass:\"title-left\"},[_c('h2',[_vm._v(\"1、扫描需要识别的二维码\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"cert-icon\"},[_c('img',{attrs:{\"src\":require(\"@/assets/images/zj/icon-saoma2.gif\")}})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"title\"},[_c('div',{staticClass:\"title-left\"},[_c('h2',[_vm._v(\"2、请完成脸部识别\")])])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"renzheng\">\r\n    <headerBar :header-data=\"headerData\" />\r\n    <div class=\"container\">\r\n      <div class=\"content\">\r\n        <div class=\"common-main box\">\r\n          <!-- 通用标题 beign -->\r\n          <div class=\"title\">\r\n            <div class=\"title-left\">\r\n              <h2>1、扫描需要识别的二维码</h2>\r\n            </div>\r\n          </div>\r\n          <!-- 通用标题 end -->\r\n          <div class=\"cert-content\" @click=\"goScan()\">\r\n            <div class=\"cert-icon\"><img src=\"@/assets/images/zj/icon-saoma2.gif\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div v-if=\"actionCode == '1'\" class=\"content\">\r\n        <div class=\"common-main box\">\r\n          <!-- 通用标题 beign -->\r\n          <div class=\"title\">\r\n            <div class=\"title-left\">\r\n              <h2>2、请完成脸部识别</h2>\r\n            </div>\r\n          </div>\r\n          <!-- 通用标题 end -->\r\n          <div class=\"cert-content\" @click=\"goFace()\">\r\n            <div v-if=\"!idCard\" class=\"cert-icon\"><img src=\"@/assets/images/zj/icon-rlsb.png\"></div>\r\n            <div class=\"cert-result\">\r\n              <div v-if=\"idCard\" class=\"result-icon\"><img :src=\"faceImage\" style=\"width:200px; height:300px;\"></div>\r\n              <div v-if=\"idCard\" class=\"result-text\"><img src=\"@/assets/images/zj/icon-rzcg.png\">脸部识别成功</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"content\">\r\n        <div class=\"common-main box\">\r\n          <!-- 通用标题 beign -->\r\n          <div class=\"title\">\r\n            <div v-if=\"actionCode == '1'\" class=\"title-left\">\r\n              <h2>3、请签名</h2>\r\n            </div>\r\n            <div v-else class=\"title-left\">\r\n              <h2>2、请签名</h2>\r\n            </div>\r\n          </div>\r\n          <!-- 通用标题 end -->\r\n          <div id=\"btn\" class=\"cert-content\" @click=\"goSing()\">\r\n            <div class=\"cert-icon\"><img :src=\"handImage\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n    <div :hidden=\"hidden\">\r\n      <!-- 签名弹窗 begin -->\r\n      <van-popup\r\n        v-model=\"showqm\"\r\n        position=\"bottom\"\r\n        closeable\r\n        round\r\n        :style=\"{ height: '100%' }\"\r\n      >\r\n        <div class=\"container-mini\">\r\n          <div class=\"canvas-content\">\r\n            <canvas ref=\"canvasF\" @touchstart=\"touchStart\" @touchmove=\"touchMove\" @touchend=\"touchEnd\" @mousedown=\"mouseDown\" @mousemove=\"mouseMove\" @mouseup=\"mouseUp\" />\r\n          </div>\r\n\r\n          <div class=\"foot-btn fixed sideleft\">\r\n            <ul>\r\n              <li><van-button type=\"info\" size=\"large\" plain round @click=\"back\">返回</van-button></li>\r\n              <li><van-button id=\"reset\" type=\"info\" size=\"large\" plain round @click=\"overwrite\">清除</van-button></li>\r\n              <li><van-button id=\"get\" type=\"info\" size=\"large\" round @click=\"commit\">确定</van-button></li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </van-popup>\r\n    <!-- 签名弹窗 end -->\r\n    </div>\r\n  </div>\r\n</template>\r\n<script land=\"script\" scoped>\r\nimport headerBar from '@/components/header/headerBar.vue'\r\nimport { pageRouter, NativeJS } from '@/common/js/mixin.js'\r\n// import sdk from '@/common/js/sdk' // 引入sdk.js\r\n// import wx from 'weixin-js-sdk'\r\n\r\nexport default {\r\n  name: 'ZjSxqm',\r\n  components: {\r\n    headerBar\r\n  },\r\n  mixins: [pageRouter, NativeJS],\r\n  data() {\r\n    return {\r\n      stageInfo: '',\r\n      client: {},\r\n      points: [],\r\n      canvasTxt: null,\r\n      startX: 0,\r\n      startY: 0,\r\n      moveY: 0,\r\n      moveX: 0,\r\n      endY: 0,\r\n      endX: 0,\r\n      w: null,\r\n      h: null,\r\n      isDown: false,\r\n      isViewAutograph: this.$route.query.isViews > 0,\r\n      contractSuccess: this.$route.query.contractSuccess,\r\n      hidden: true,\r\n      width: '',\r\n      height: '',\r\n      idCard: false,\r\n      file1: '',\r\n      file2: '',\r\n      token: '',\r\n      zjmessage: '',\r\n      baseurl: '',\r\n      isScan: false,\r\n      handImage: require('@/assets/images/zj/icon-qm.png'),\r\n      faceImage: '',\r\n      actionCode: '',\r\n      showqm: true,\r\n      headerData: {\r\n        title: '电子签名',\r\n        leftUrl: 'back',\r\n        leftText: ' '\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n  // 二维码数据\r\n    Native_ScanData(val) {\r\n      console.info('val===0==', val.name)\r\n      if (val) {\r\n        console.info('val===1==', val.name)\r\n        // alert(val.name)\r\n        this.token = val.name\r\n        this.getScanData(val.name)\r\n      }\r\n    },\r\n    // 照相机、图片返回数据\r\n    Native_PhoneImageData(val) {\r\n      console.info('val===0==', val)\r\n      if (val) {\r\n        if (val.name === 'face') {\r\n          this.file1 = val.images\r\n          this.getFaceData(val.images)\r\n        } else {\r\n          this.file2 = val.images\r\n          this.getSingImage(val.images)\r\n        }\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    const canvas = this.$refs.canvasF\r\n    canvas.height = window.innerHeight\r\n    canvas.width = window.innerWidth\r\n    this.canvasTxt = canvas.getContext('2d')\r\n    this.canvasTxt.lineWidth = '10' // 设置线宽\r\n    this.canvasTxt.lineCap = 'round' // 设置线两端端点样式更加圆润\r\n    this.canvasTxt.LineJoin = 'round'// 设置两条线连接处更加圆润\r\n    this.stageInfo = canvas.getBoundingClientRect()\r\n  },\r\n  created() {\r\n  },\r\n  methods: {\r\n    // mobile\r\n    touchStart(ev) {\r\n      ev = ev || event\r\n      ev.preventDefault()\r\n      if (ev.touches.length === 1) {\r\n        const obj = {\r\n          x: ev.targetTouches[0].clienX,\r\n          y: ev.targetTouches[0].clientY\r\n        }\r\n        this.startX = obj.x\r\n        this.startY = obj.y\r\n        this.canvasTxt.beginPath()\r\n        this.canvasTxt.moveTo(this.startX, this.startY)\r\n        this.canvasTxt.lineTo(obj.x, obj.y)\r\n        this.canvasTxt.stroke()\r\n        this.canvasTxt.closePath()\r\n        this.points.push(obj)\r\n      }\r\n    },\r\n    touchMove(ev) {\r\n      ev = ev || event\r\n      ev.preventDefault()\r\n      if (ev.touches.length === 1) {\r\n        const obj = {\r\n          x: ev.targetTouches[0].clientX - this.stageInfo.left,\r\n          y: ev.targetTouches[0].clientY - this.stageInfo.top\r\n        }\r\n        this.moveY = obj.y\r\n        this.moveX = obj.x\r\n        this.canvasTxt.beginPath()\r\n        this.canvasTxt.moveTo(this.startX, this.startY)\r\n        this.canvasTxt.lineTo(obj.x, obj.y)\r\n        this.canvasTxt.stroke()\r\n        this.canvasTxt.closePath()\r\n        this.startY = obj.y\r\n        this.startX = obj.x\r\n        this.points.push(obj)\r\n      }\r\n    },\r\n    touchEnd(ev) {\r\n      ev = ev || event\r\n      ev.preventDefault()\r\n      if (ev.touches.length === 1) {\r\n        const obj = {\r\n          x: ev.targetTouches[0].clientX - this.stageInfo.left,\r\n          y: ev.targetTouches[0].clientY - this.stageInfo.top\r\n        }\r\n        this.canvasTxt.beginPath()\r\n        this.canvasTxt.moveTo(this.startX, this.startY)\r\n        this.canvasTxt.lineTo(obj.x, obj.y)\r\n        this.canvasTxt.stroke()\r\n        this.canvasTxt.closePath()\r\n        this.points.push(obj)\r\n      }\r\n    },\r\n    // pc\r\n    mouseDown(ev) {\r\n      ev = ev || event\r\n      ev.preventDefault()\r\n      if (1) {\r\n        const obj = {\r\n          x: ev.offsetX,\r\n          y: ev.offsetY\r\n        }\r\n        this.startX = obj.x\r\n        this.startY = obj.y\r\n        this.canvasTxt.beginPath()\r\n        this.canvasTxt.moveTo(this.startX, this.startY)\r\n        this.canvasTxt.lineTo(obj.x, obj.y)\r\n        this.canvasTxt.stroke()\r\n        this.canvasTxt.closePath()\r\n        this.points.push(obj)\r\n        this.isDown = true\r\n      }\r\n    },\r\n    mouseMove(ev) {\r\n      ev = ev || event\r\n      ev.preventDefault()\r\n      if (this.isDown) {\r\n        const obj = {\r\n          x: ev.offsetX,\r\n          y: ev.offsetY\r\n        }\r\n        this.moveY = obj.y\r\n        this.moveX = obj.x\r\n        this.canvasTxt.beginPath()\r\n        this.canvasTxt.moveTo(this.startX, this.startY)\r\n        this.canvasTxt.lineTo(obj.x, obj.y)\r\n        this.canvasTxt.stroke()\r\n        this.canvasTxt.closePath()\r\n        this.startY = obj.y\r\n        this.startX = obj.x\r\n        this.points.push(obj)\r\n      }\r\n    },\r\n    mouseUp(ev) {\r\n      ev = ev || event\r\n      ev.preventDefault()\r\n      if (1) {\r\n        const obj = {\r\n          x: ev.offsetX,\r\n          y: ev.offsetY\r\n        }\r\n        this.canvasTxt.beginPath()\r\n        this.canvasTxt.moveTo(this.startX, this.startY)\r\n        this.canvasTxt.lineTo(obj.x, obj.y)\r\n        this.canvasTxt.stroke()\r\n        this.canvasTxt.closePath()\r\n        this.points.push(obj)\r\n        this.points.push({ x: -1, y: -1 })\r\n        this.isDown = false\r\n      }\r\n    },\r\n    // 返回\r\n    back() {\r\n      this.hidden = true\r\n    },\r\n    // 重写\r\n    overwrite() {\r\n      this.canvasTxt.clearRect(0, 0, this.$refs.canvasF.width, this.$refs.canvasF.height)\r\n      this.points = []\r\n    },\r\n    // 提交签名\r\n    commit() {\r\n      this.rotateBase64Img(this.$refs.canvasF.toDataURL(), 270)\r\n      this.hidden = true\r\n    },\r\n    // 图片旋转\r\n    rotateBase64Img(src, edg) {\r\n      const that = this\r\n      var canvas1 = document.createElement('canvas')\r\n      var ctx = canvas1.getContext('2d')\r\n      var imgW// 图片宽度\r\n      var imgH// 图片高度\r\n      var size// canvas初始大小\r\n      if (edg % 90 !== 0) {\r\n        console.error('旋转角度必须是90的倍数!')\r\n      }\r\n      (edg < 0) && (edg = (edg % 360) + 360)\r\n      const quadrant = (edg / 90) % 4 // 旋转象限\r\n      const cutCoor = { sx: 0, sy: 0, ex: 0, ey: 0 } // 裁剪坐标\r\n      var image = new Image()\r\n      image.crossOrigin = 'anonymous'\r\n      image.src = src\r\n      image.onload = function() {\r\n        imgW = image.width\r\n        imgH = image.height\r\n        size = imgW > imgH ? imgW : imgH\r\n        canvas1.width = size * 2\r\n        canvas1.height = size * 2\r\n        switch (quadrant) {\r\n          case 0:\r\n            cutCoor.sx = size\r\n            cutCoor.sy = size\r\n            cutCoor.ex = size + imgW\r\n            cutCoor.ey = size + imgH\r\n            break\r\n          case 1:\r\n            cutCoor.sx = size - imgH\r\n            cutCoor.sy = size\r\n            cutCoor.ex = size\r\n            cutCoor.ey = size + imgW\r\n            break\r\n          case 2:\r\n            cutCoor.sx = size - imgW\r\n            cutCoor.sy = size - imgH\r\n            cutCoor.ex = size\r\n            cutCoor.ey = size\r\n            break\r\n          case 3:\r\n            cutCoor.sx = size\r\n            cutCoor.sy = size - imgW\r\n            cutCoor.ex = size + imgH\r\n            cutCoor.ey = size + imgW\r\n            break\r\n        }\r\n        ctx.translate(size, size)\r\n        ctx.rotate(edg * Math.PI / 180)\r\n        ctx.drawImage(image, 0, 0)\r\n        var imgData = ctx.getImageData(cutCoor.sx, cutCoor.sy, cutCoor.ex, cutCoor.ey)\r\n        if (quadrant % 2 === 0) {\r\n          canvas1.width = imgW\r\n          canvas1.height = imgH\r\n        } else {\r\n          canvas1.width = imgH\r\n          canvas1.height = imgW\r\n        }\r\n        ctx.putImageData(imgData, 0, 0)\r\n        const imgUrl = canvas1.toDataURL()\r\n        that.getSingImage(imgUrl)\r\n        that.handImage = imgUrl\r\n        that.$store.state.qmUrl = imgUrl\r\n      }\r\n    },\r\n    showQmPopup() {\r\n      this.hidden = false\r\n    },\r\n    goHome() {\r\n      this.$router.push('/MhHome')\r\n    },\r\n    dataURLtoFile(dataurl, filename) {\r\n      var arr = dataurl.split(',')\r\n      var mime = arr[0].match(/:(.*?);/)[1]\r\n      var bstr = atob(arr[1])\r\n      var n = bstr.length\r\n      var u8arr = new Uint8Array(n)\r\n      while (n--) {\r\n        u8arr[n] = bstr.charCodeAt(n)\r\n      }\r\n      return new File([u8arr], filename, { type: mime })\r\n    },\r\n    goBackPage() {\r\n    // this.$router.go(-1)\r\n      this.$router.push('zjhome')\r\n    },\r\n    // 页面返回\r\n    goBack() {\r\n      if (process.env.NODE_ENV !== 'development') {\r\n        try {\r\n          window.myapp.backRoute()\r\n        } catch (err) {\r\n          console.log(err)\r\n        }\r\n        try {\r\n          window.webkit.messageHandlers.backRoute.postMessage()\r\n        } catch (err) {\r\n          console.log(err)\r\n        }\r\n      }\r\n    },\r\n    // 二维码扫描\r\n    goScan() {\r\n      this.NativeScan()\r\n      // console.log('地址===', window.location.href.split('#')[0])\r\n      // sdk.getJSSDK('')\r\n      // wx.scanQRCode({\r\n      //   needResult: 1, // 默认为0，扫描结果由微信处理，1则直接返回扫描结果，\r\n      //   scanType: ['qrCode', 'barCode'], // 可以指定扫二维码还是一维码，默认二者都有\r\n      //   success: function(res) {\r\n      //     var result = res.resultStr // 当needResult 为 1 时，扫码返回的结果\r\n      //     console.log('result=========', result)\r\n      //     that.getScanData(result)\r\n      //     that.token = result\r\n      //   }\r\n      // })\r\n    },\r\n    getScanData(token) {\r\n      this.$store.dispatch('zj/getSfxxAction', this.token).then(res => {\r\n        res = JSON.parse(res)\r\n        this.zjmessage = res\r\n        console.log('zjmessage=========', res)\r\n        if (res !== null) {\r\n          this.isScan = true\r\n        } else {\r\n          this.$toast.fail('二维码信息错误，请核对二维码')\r\n          return\r\n        }\r\n        if (res.method === 2) {\r\n          this.idCard = true\r\n          this.actionCode = '2'\r\n          this.baseurl = res.url\r\n          this.$toast('扫描成功')\r\n        } else {\r\n          this.idCard = false\r\n          this.$toast.fail('二维码错误！')\r\n          return\r\n        }\r\n      }).catch(error => {\r\n        this.$toast(error)\r\n        console.log('error=====', error)\r\n      })\r\n    },\r\n    // 人脸识别\r\n    goFace() {\r\n      if (!this.actionCode) {\r\n        this.$toast('请先进行二维码扫描')\r\n        return\r\n      }\r\n      this.NativePhone(3001)\r\n    // const that = this\r\n    // wx.chooseImage({\r\n    //   count: 1, // 默认9\r\n    //   sizeType: ['original', 'compressed'], // 可以指定是原图还是压缩图，默认二者都有\r\n    //   sourceType: ['album', 'camera'], // 可以指定来源是相册还是相机，默认二者都有\r\n    //   success: function(res) {\r\n    //     that.localIds = res.localIds // 返回选定照片的本地ID列表，localId可以作为img标签的src属性显示图片\r\n    //     console.log('lovalIds======', that.localIds)\r\n    //     wx.getLocalImgData({\r\n    //       localId: that.localIds[0], // 图片的localID\r\n    //       success: function(res) {\r\n    //         var localData = res.localData // localData是图片的base64数据，可以用img标签显示\r\n    //         if (that.is_phone()) {\r\n    //           // 如果是安卓系统需要对wx.getLocalImgData获得的base64进行处理\r\n    //           localData = 'data:image/jpeg;base64,' + localData.replace(/\\n/g, '')\r\n    //         }\r\n    //         that.getFaceData(localData)\r\n    //       }\r\n    //     })\r\n    //   }\r\n    // })\r\n    },\r\n    getFaceData(file1) {\r\n      const param = new FormData() // 创建form对象\r\n      param.append('file', this.dataURLtoFile(file1, 'i.png'), 'head_image')// 通过append向form对象添加数据\r\n      param.append('idcard', this.zjmessage.idcard)\r\n      param.append('name', this.zjmessage.name)\r\n      this.$store.dispatch('zj/matchIdcardPhotoAction', {\r\n        token: this.token,\r\n        data: param,\r\n        baseurl: this.baseurl\r\n      }).then(res => {\r\n        this.faceImage = this.file1\r\n        this.$toast.success('人脸识别成功！')\r\n        console.log('res=====', res)\r\n      }).catch(error => {\r\n        this.$toast(error)\r\n\r\n        console.log('error=====', error)\r\n      })\r\n    },\r\n\r\n    // 签名\r\n    goSing() {\r\n      if (!this.isScan) {\r\n        this.$toast('请先进行二维码扫描')\r\n        return\r\n      }\r\n      this.showqm = true\r\n      this.overwrite()\r\n      this.hidden = false\r\n      // wx.miniProgram.redirectTo({ url: '/pages/index/qm' })\r\n      // var list = []\r\n      // this.$store.commit('router/SET_KEEP_ALIVE', list)\r\n\r\n      // this.NativeHandSing()\r\n    },\r\n    is_phone() {\r\n      var u = navigator.userAgent\r\n      var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Linux') > -1 // g\r\n      var isIOS = !!u.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/) // ios终端\r\n      if (isAndroid) {\r\n      // 这个是安卓操作系统\r\n        return true\r\n      }\r\n      if (isIOS) {\r\n      // 这个是ios操作系统\r\n        return false\r\n      }\r\n    },\r\n    getSingImage(file2) {\r\n      const images = JSON.stringify({ 'images': file2 })\r\n      const test = {\r\n        'gg_smjl_retmsg': images\r\n      }\r\n      this.$store.dispatch('zj/updateHandImageAction', {\r\n        data: test,\r\n        baseurl: this.zjmessage.qmurl,\r\n        token: this.token\r\n      }).then(res => {\r\n        this.handImage = file2\r\n        // this.$store.state.qmUrl = file2\r\n        this.$toast.success('签名成功！')\r\n        console.log('res=====', res)\r\n      }).catch(error => {\r\n        this.$toast(error)\r\n        console.log('error=====', error)\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"css\" scoped>\r\n.cert-content{margin:30px 0}\r\n.cert-content .cert-icon{text-align: center;max-width: 120px;margin: 0 auto;margin-top:10px; margin-bottom: 10px;}\r\n.cert-content .cert-icon > img,.cert-result .result-icon > img{width: 100%;height: auto;}\r\n.cert-result .result-icon{width:95%;text-align: center;margin: 0 auto;margin-top:10px; margin-bottom: 10px;}\r\n.result-text{font-size: 14px; color: #666F83;display: flex;align-items: center;justify-content: center;margin:10px 0;}\r\n.result-text > img{width: 14px; height: 14px;margin:0 10px 0 0;}\r\n\r\n/* 签名画布样式 */\r\n/* .canvas-content{overflow: hidden;left: 65px;right:5px;bottom:5px;top:5px;position: absolute; } */\r\n.canvas-content{overflow: hidden;height: calc(100vh - 70px); }\r\n.signatureBox {\r\n    width: 100%;\r\n    height: calc(100% - 50px);\r\n    box-sizing: border-box;\r\n    overflow: hidden;\r\n    background: #fff;\r\n    z-index: 100;\r\n    display: flex;\r\n    flex-direction: column;\r\n  }\r\n  .canvasBox {\r\n    box-sizing: border-box;\r\n    flex: 1;\r\n  }\r\n\r\n.foot-btn.sideleft{width: 60px;height: 100vh;}\r\n.foot-btn.sideleft > ul{display: grid;margin-left: -52px;}\r\n.foot-btn.sideleft > ul > li{width: 100%;transform: rotate(90deg);}\r\n.foot-btn.sideleft > ul > li > .van-button{min-width: 100px;}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ZjSxqm.vue?vue&type=script&land=script&scoped=true&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ZjSxqm.vue?vue&type=script&land=script&scoped=true&lang=js&\"","import { render, staticRenderFns } from \"./ZjSxqm.vue?vue&type=template&id=403b0040&scoped=true&\"\nimport script from \"./ZjSxqm.vue?vue&type=script&land=script&scoped=true&lang=js&\"\nexport * from \"./ZjSxqm.vue?vue&type=script&land=script&scoped=true&lang=js&\"\nimport style0 from \"./ZjSxqm.vue?vue&type=style&index=0&id=403b0040&lang=css&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"403b0040\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}