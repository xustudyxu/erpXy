(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["OrderEvaluation","WdxmBj"],{"445c":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"nav-bar"},[t.headerData.leftText?a("div",{staticClass:"nav-bar-left"},[a("div",{on:{click:function(e){return e.stopPropagation(),t.handelClick(t.headerData.leftUrl)}}},[a("i",{staticClass:"iconfont iconicon-back"}),a("div",{staticClass:"nav-bar-txt"},[t._v(t._s(t.headerData.leftText))])])]):t._e(),a("div",{staticClass:"nav-bar-title"},[t._v(t._s(t.headerData.title))]),a("div",{staticClass:"nav-bar-right"},[t.headerData.rightText?a("div",{staticClass:"nav-bar-txt",on:{click:function(e){return t.handelClick(t.headerData.rightUrl,t.headerData.rightCallBackClick)}}},[t._v(t._s(t.headerData.rightText))]):t._e(),t.headerData.showSearch?a("i",{staticClass:"iconfont iconsousuo",on:{click:function(e){return t.searchClick()}}}):t._e()])])},n=[],o={name:"HeaderBar",props:{headerData:{type:null,required:!0}},data:function(){return{}},created:function(){this.headerData&&(this.headerData.rightCallBackClick||(this.headerData.rightCallBackClick=!1))},methods:{searchClick:function(){this.$bus.$emit("showMeun",!0)},handelClick:function(t,e){if(console.log("targetUrl=====================",t),"back"!==t)if("needConfirm"!==t){if(t)this.$router.push(t);else if(e){var a="callback";this.headerData&&this.headerData.rightText&&(a=this.headerData.rightText),this.$emit("callbackClick",a)}}else this.$emit("on-exit");else this.$router.go(-1)}}},s=o,r=a("2877"),c=Object(r["a"])(s,i,n,!1,null,"416ac0a2",null);e["a"]=c.exports},"510f":function(t,e,a){"use strict";a.d(e,"d",(function(){return r})),a.d(e,"a",(function(){return c})),a.d(e,"b",(function(){return l}));a("a4d3"),a("4de4"),a("c975"),a("a434"),a("b0c0"),a("e439"),a("dbb4"),a("b64b"),a("159b");var i=a("ade3"),n=a("2f62");function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function s(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var r={mounted:function(){},data:function(){return{}},methods:{goPage:function(t,e){this.$store.dispatch("router/setPageParams",e),this.$router.push({name:t,params:{keyName:e}})},getParams:function(){return this.$store.state.router.pageParams}},beforeRouteEnter:function(t,e,a){a((function(e){if("MhHome"!==t.name&&"MallHome"!==t.name){var a=e.$store.state.router.keepAlive,i=a.indexOf(t.name);-1===i&&a.push(t.name),e.$store.commit("router/SET_KEEP_ALIVE",a)}else e.$store.commit("router/SET_KEEP_ALIVE",[]);console.log("PageRoute=进入页面==",a)}))},beforeRouteLeave:function(t,e,a){var i=[];if(i=this.$store.state.router.keepAlive,"GysXmbm"===e.name){var n=i.indexOf(e.name);i.splice(n,1)}var o=i.indexOf(e.name),s=i.indexOf(t.name);-1!==s&&i.splice(o,1);for(var r=[],c=0;c<this.$store.state.router.footMeun.length;c++)r.push(this.$store.state.router.footMeun[c].component);var l=r.indexOf(e.name),d=r.indexOf(t.name);-1!==l&&-1!==d&&i.splice(o,1),console.log("PageRoute=退出页面======================",i),this.$store.commit("router/SET_KEEP_ALIVE",i),a()}},c={mounted:function(){var t=this;window["showSoftKeyBoard"]=function(e){console.info("showSoftKeyBoard-----",e),t.Native_ShowSoftKeyBoard=e},window["getRotuerPage"]=function(e){return t.$store.state.router.keepAlive},window["updateScanData"]=function(e){console.info("updateScan======",e),t.Native_ScanData=e},window["updateHandImage"]=function(e){t.Native_PhoneImageData=e}},data:function(){return{Native_ShowSoftKeyBoard:"",Native_ScanData:{},Native_PhoneImageData:{},Native_CaLoad:"",Native_CaList:{}}},computed:{},methods:{NativeLoadCA:function(){var t=this;try{this.Native_CaLoad=window.myapp.LoadCA(),console.info("NativeLoadCA======",window.myapp.LoadCA())}catch(e){console.log(e)}this.$bridge.callhandler("LoadCA","{page:1}",(function(e){var a=JSON.parse(e);console.log("goScanView------",e),t.Native_CaLoad=a}))},NativeGetAllCAInfo:function(){try{console.info("NativeGetAllCAInfo======",window.myapp.getAllCAInfo());var t=window.myapp.getAllCAInfo();this.Native_CaList=JSON.parse(t)}catch(e){console.log(e)}this.$bridge.callhandler("getAllCAInfo",(function(t){}))},NativeGetOnelCAInfo:function(t){try{console.info("NativeGetAllCAInfo======",window.myapp.getOneCAInfo())}catch(e){console.log(e)}this.$bridge.callhandler("getOneCAInfo",t,(function(t){}))},NativeChangePin:function(t){try{window.myapp.changePin(t)}catch(e){console.log(e)}this.$bridge.callhandler("changePin",t,(function(t){}))},NativeEnvelopeDecrypt:function(t){try{window.myapp.envelopeDecrypt(t)}catch(e){console.log(e)}this.$bridge.callhandler("envelopeDecrypt",t,(function(t){}))},NativeEnvelopeEncrypt:function(t){try{window.myapp.envelopeEncrypt(t)}catch(e){console.log(e)}this.$bridge.callhandler("envelopeEncrypt",t,(function(t){}))}}},l={mounted:function(){var t=this;window["getRotuerPage"]=function(e){return t.$store.state.router.keepAlive},window["updateScanData"]=function(e){console.info("updateScan======",e),t.Native_ScanData=e},window["updateHandImage"]=function(e){t.Native_PhoneImageData=e}},data:function(){return{Native_ScanData:{},Native_PhoneImageData:{}}},computed:{},methods:{NativeAddPush:function(t){try{window.myapp.addPush(t)}catch(e){console.log(e)}this.$bridge.callhandler("addPush",t,(function(t){}))},NativeDissPush:function(){try{window.myapp.dissPush()}catch(t){console.log(t)}this.$bridge.callhandler("dissPush",(function(t){}))},NativeDissDialog:function(){try{window.myapp.dissDialog()}catch(t){console.log(t)}this.$bridge.callhandler("dissDialog",(function(t){}))},NativeLoginAction:function(t){try{window.myapp.loginAction(t)}catch(e){console.log(e)}this.$bridge.callhandler("loginAction",t,(function(t){}))},NativeCheakUpdate:function(){try{window.myapp.cheakUpdate()}catch(t){console.log(t)}this.$bridge.callhandler("cheakUpdate",(function(t){}))},NativeGetLjSize:function(){try{window.myapp.getlj()}catch(t){console.log(t)}this.$bridge.callhandler("getlj",(function(t){}))},NativeCleanLj:function(){try{window.myapp.cleanlj()}catch(t){console.log(t)}this.$bridge.callhandler("cleanlj",(function(t){}))},NativeDownFiles:function(t){try{window.myapp.downloadFile(t)}catch(e){console.log(e)}this.$bridge.callhandler("downloadFile",String(t),(function(t){}))},NativeScan:function(){var t=this;try{window.myapp.goScanView()}catch(e){console.log(e)}this.$bridge.callhandler("goScanView","{page:1}",(function(e){var a=JSON.parse(e);console.log("goScanView------",e),t.Native_ScanData=a}))},NativePhone:function(t){var e=this;try{window.myapp.goIDCards(t)}catch(a){console.log(a)}this.$bridge.callhandler("goIDCards",t,(function(t){var a=JSON.parse(t);console.log("goIDCards------",a),e.Native_PhoneImageData=a}))},NativeHandSing:function(){var t=this;try{window.myapp.goHandWriteView()}catch(e){console.log(e)}this.$bridge.callhandler("goHandWriteView",(function(e){t.Native_PhoneImageData=e}))},NativeCallPhone:function(t){try{window.myapp.call(t)}catch(e){console.log(e)}this.$bridge.callhandler("call",t,(function(t){}))},NativeUpdateImage:function(){try{window.myapp.CameraOrImage()}catch(t){console.log(t)}this.$bridge.callhandler("CameraOrImage",(function(t){}))}}};s({onQueryChange:function(t){this.query=t},blurInput:function(){this.$refs.searchBox.blur()},addQuery:function(t){this.$refs.searchBox.setQuery(t)},saveSearch:function(){this.updateHostorList(this.query)}},Object(n["b"])(["updateHostorList","deleteSearchHistory"])),s({wybmAction:function(){this.wybmfbAction()}},Object(n["b"])(["wybmfbAction"]))},"5e2c":function(t,e,a){t.exports=a.p+"img/no-img.3caca518.png"},c2b6:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("headerBar",{attrs:{"header-data":t.headerData}}),a("div",{staticClass:"container"},[a("div",{staticClass:"content"},[a("div",{staticClass:"common-main box"},[a("div",{staticClass:"goodscart-item"},[a("div",{staticClass:"order-loop"},[a("div",{staticClass:"order-con"},[a("div",{staticClass:"goods-img",on:{click:function(e){return t.imgPreview(t.Detail.picture?t.Detail.picture:t.defaultImg)}}},[a("img",{attrs:{src:t.Detail.picture,onerror:t.defaultImg}})]),a("div",{staticClass:"goods-name"},[a("div",{staticClass:"name",on:{click:function(e){return t.toProductDetail(t.Detail.product_id,t.Detail.product_name)}}},[t._v(t._s(t.Detail.product_name))])]),a("div",{staticClass:"goods-price"},[a("div",{staticClass:"jiage"},[t._v("¥"+t._s(t.Detail.price))]),a("div",{staticClass:"shuliang"},[t._v("× "+t._s(t.Detail.total))])])])])])])]),a("div",{staticClass:"content"},[a("div",{staticClass:"common-main box"},[a("div",{staticClass:"evaluation-content"},[a("div",{staticClass:"page-list"},[t._m(0),a("div",{staticClass:"pagelist-right left"},[a("van-rate",{model:{value:t.starvalue,callback:function(e){t.starvalue=e},expression:"starvalue"}})],1)]),a("div",{staticClass:"page-list block"},[t._m(1),a("div",{staticClass:"pagelist-right"},[a("van-field",{attrs:{rows:"3",autosize:"",type:"textarea",placeholder:"请输入评价内容",maxlength:"250"},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}})],1)]),a("div",{staticClass:"page-list"},[a("div",{staticClass:"pagelist-left"},[t._v("附件")]),a("div",{staticClass:"pagelist-right left",staticStyle:{"margin-left":"0"}},[a("XyUploadPlus",{ref:"uploadEl",staticStyle:{width:"100%"},attrs:{filters:{ext:"jpg,jpeg,png"},filegroup:t.filegroup,filed:"test1"},on:{getFileChangeInfo:t.getFileChangeInfo}})],1)]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])])])])]),a("div",{staticClass:"foot-btn fixed"},[a("ul",[a("li",[a("van-button",{attrs:{type:"info",round:"",size:"large"},on:{click:t.saveOrderEvaluateAction}},[t._v("保存评价")])],1)])])],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pagelist-left"},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v(" 商品评分")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pagelist-left"},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v(" 评价内容")])}],o=a("445c"),s=a("510f"),r=a("a7a2"),c=a("28a2"),l={name:"OrderEvaluation",components:{headerBar:o["a"],XyUploadPlus:r["a"]},mixins:[s["d"]],data:function(){return{defaultImg:'this.src="'+a("5e2c")+'"',filegroup:"",fileChangeInfo:{},message:"",checked:!0,starvalue:0,fileList:[],headerData:{title:"评价晒单",leftUrl:"back",leftText:" "},detailId:"",Detail:"",Order:"",place_time:""}},created:function(){this.detailId=this.$store.state.member.orderId,this.getData()},methods:{imgPreview:function(t){var e=[];e.push(t),Object(c["a"])({images:e,loop:!1})},toProductDetail:function(t,e){this.$store.commit("goods/SET_SPMC",e),this.$store.commit("goods/SET_SPID",t),this.$router.push({name:"GoodsDetail",params:{refresh:!0}})},saveOrderEvaluateAction:function(){var t=this;if(this.starvalue)if(this.message){var e={id:this.Detail.id,fileChangeInfo:this.fileChangeInfo,evaluation_star:this.starvalue,evaluation_desc:this.message};this.$store.dispatch("member/saveOrderDetailEvaluationAction",e).then((function(e){t.$toast("保存评价成功"),t.$bus.$emit("pjSearch"),t.$router.push("MyOrder")})).catch((function(){t.loading=!1}))}else this.$toast("请输入评价内容");else this.$toast("请进行商品评分")},getData:function(){var t=this;this.$store.dispatch("member/getOrderDetailAction",{e_order_detail_id:this.detailId}).then((function(e){t.Detail=e.e_order_detail,t.Order=e.e_order,t.place_time=e.place_time})).catch((function(){t.loading=!1}))},getFileChangeInfo:function(t,e){this.fileChangeInfo[t]=e},goAddressadd:function(){this.$router.push({name:"AddressAdd"})}}},d=l,u=a("2877"),h=Object(u["a"])(d,i,n,!1,null,"f4a17002",null);e["default"]=h.exports}}]);
//# sourceMappingURL=OrderEvaluation.c9580c69.js.map